<html>
    <head>
        <title>Navigator</title>
        <meta name="description" content="Navigator: an advanced blockchain explorer for the Sia network">
        <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script src = "https://code.highcharts.com/highcharts.js"></script>
        
        <link rel="stylesheet" type="text/css" href="navigator_styles.css">
        <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,900" rel="stylesheet">
        
        <meta name="viewport" content="width=600">

    </head>
      
    <body>
        <div class="header-outer">
            <div class="header2">
                <span style="font-size: 64; font-weight: 700; vertical-align: middle; padding: 0 0 0 25;">
                    <a href="/navigator.html" style="text-decoration:none; line-height: 125px; color:#678090">
                        Navigator
                    </a>
                </span>
            </div>
        </div>

        <div style="background-color: #678090; height:15px"></div>
            
            <div class="main-outer">
                <div class="main">
                    <div class="content">
                        
                        <!-- Tabs -->
                        <div class="tab" style="max-width: 1150; min-width: 500; margin: 0 auto; padding: 50 0 0 0">
                            <button class="tablinks" onclick="openCity(event, 'Simple')" id="defaultOpen" >Simple search</button>
                            <button class="tablinks" onclick="openCity(event, 'Batch')">Addresses batch</button>
                            <button class="tablinks" onclick="openCity(event, 'Contracts')">Host contracts</button>
                        </div>

                        <!-- Tab content -->
                        <div id="Simple" class="tabcontent">
                            <form class="search-box-outer" style="margin: 0 auto; max-width: 1150px; min-width: 550">
                                <input class="search-box" type="text" name="search" placeholder="Search an address, block, transaction, contract...">
                                <button type="submit">Search</button>                            
                            </form>
                        </div>
                        
                        <div id="Batch" class="tabcontent">
                            <div class="search-box-outer" style="margin: 0 auto; max-width: 1150px; min-width: 550">
                                <textarea class="textbox" id="addressesInput" placeholder="Paste a list of addresses, one per line. TIP: type 'wallet addresses' on the UI Terminal and paste the result here. Max: 1000 addresses"></textarea>
                                <button type="submit-big" name="addressesBatch">Search</button>
                            </div>
                        </div>
                        
                        <div id="Contracts" class="tabcontent">
                            <div class="search-box-outer" style="margin: 0 auto; max-width: 1150px; min-width: 550">
                                <textarea class="textbox" id="hostContractsInput" placeholder="Paste the output of a 'siac host contracts' command. TIP: save it first in a text file and copy/paste from it - 1) Open the folder where siac is located; 2) Open a command line interface; 3) In Windows/Mac type 'siac host contracts > contracts.txt'. Max: 1000 contracts "></textarea>
                                <button type="submit-big" name="hostContracts">Upload</button>
                            </div>
                        </div> 


                        <p style="margin: 80 auto"></p>

                        <!-- Loading animation -->
                        <div style="padding: 100 0" class="loader" id="loader">
                            <div class="square"></div>
                            <div class="square"></div>
                            <div class="square last"></div>
                            <div class="square clear"></div>
                            <div class="square"></div>
                            <div class="square last"></div>
                            <div class="square clear"></div>
                            <div class="square"></div>
                            <div class="square last"></div>
                        </div>

                        <div id="loader3" class="result" style="margin: 350 auto; max-width: 1150px; min-width: 550; font-size: 120%; color: #4f4f4f; font-style: italic; text-align: center">
                            Loading. If it takes more than 30 seconds, refresh your browser
                        </div>

                        <div id="loader4" class="result" style="margin: 350 auto; max-width: 1150px; min-width: 550; font-size: 120%; color: #4f4f4f; font-style: italic; text-align: center; display: none;">
                            This can take a while, be patient
                        </div>

                        <div class="result" style="margin: 50 auto; max-width: 1150px; min-width: 550; font-size: 150%; color: #4f4f4f; font-style: italic; text-align: center">
                            <span id="result"></span>
                        </div>


                        <!-- HEADER: shows hash type -->
                        <table id="header" class="table-outer table-head-out" style="margin: 0 auto; padding: 0 auto; width: 1150px; display: none;" >
                            <th style="width: 60px; text-align: center; padding: 0">
                                <IMG style="vertical-align:middle" SRC="assets/nav/a0.png" id="header_logo" ALT="hash type" WIDTH=40 HEIGHT=40>
                            </th>
                            <th id="header6" style="padding: 0; min-width: 500px">
                                <table id="header" class="table-nav inner-header" style="margin: 0 auto; padding: 0 auto; width: 1090px">
                                    <tr>
                                        <th class="text-left" style="height: 25px; border-bottom-left-radius:0px; border-top-left-radius:0px;">
                                            <span id="header2" style="vertical-align:bottom; margin: 0 0 0 0"><b>-</b></span>
                                        </th>
                                        <th id="header5" class="text-left" style="height: 25px; width: 140px; border-bottom-right-radius:0px; border-bottom-left-radius:0px; border-top-left-radius:0px">
                                            <span id="header4" style="vertical-align:bottom; padding: 0 20 0 0; float: right;"><b></b></span>
                                        </th>
                                    </tr>
                                    <tr style="height: 50px">
                                        <td id="header3" colspan="2" class="text-left"><font size="3">-</font></td>
                                    </tr>
                                </table>
                            </th>
                        </table>

                        <!-- SPACER-INSET -->

                        <div id="inset" align="center" style="margin: 50 0; display: none;">
                            <div style="height: 15; width: 30; background: #aebec4; border-radius: 7px; margin: 20 0"></div>
                            <div style="height: 15; width: 80; background: #aebec4; border-radius: 7px; margin: 20 0"></div>
                            <div style="height: 15; width: 130; background: #aebec4; border-radius: 7px; margin: 20 0"></div>
                        </div>
                    
                        <!-- REST OF THE CONTENTS --> 

                        <div id="content"></div>

                        <div id="content2"></div>
                        
                        <div id="content3"></div>
                        
                        <div id="content4"></div>

                        <div id="content5"></div>

                        <div id="content6"></div>

                        

                        <div style="height: 400" class="loader2" id="loader2"></div>
                        
                        

                        <script>

                            // *************** IMPORTANT: *************
                            // Replace with the path of your API server
                            // ****************************************
                            var apiPath = "https://localhost:3500/navigator-api"
                            

                            // Get the element with id="defaultOpen" and click on it
                            document.getElementById("defaultOpen").click(); 
                            function openCity(evt, cityName) {
                                // Declare all variables
                                var i, tabcontent, tablinks;

                                // Get all elements with class="tabcontent" and hide them
                                tabcontent = document.getElementsByClassName("tabcontent");
                                for (i = 0; i < tabcontent.length; i++) {
                                    tabcontent[i].style.display = "none";
                                }

                                // Get all elements with class="tablinks" and remove the class "active"
                                tablinks = document.getElementsByClassName("tablinks");
                                for (i = 0; i < tablinks.length; i++) {
                                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                                }

                                // Show the current tab, and add an "active" class to the button that opened the tab
                                document.getElementById(cityName).style.display = "block";
                                evt.currentTarget.className += " active";
                            }


                            // Handling POST requests
                                
                                // HOST CONTRACTS BATCH SEARCH
                                $("button[name = 'hostContracts']").click(function(){
                                    // Hiding elements
                                    document.getElementById("header").style.display = 'none'; 
                                    document.getElementById("inset").style.display = 'none'
                                    document.getElementById("content").style.display = 'none'
                                    document.getElementById("content2").style.display = 'none'
                                    document.getElementById("content3").style.display = 'none'
                                    document.getElementById("content4").style.display = 'none'
                                    document.getElementById("content5").style.display = 'none'
                                    document.getElementById("content6").style.display = 'none'
                                    document.getElementById("loader").style.display = 'block'
                                    document.getElementById("loader2").style.display = 'block'
                                    document.getElementById("loader4").style.display = 'block'

                                    query = document.getElementById("hostContractsInput").value
                                    //query = query.slice(0,20000)

                                    var pathPost = apiPath + "/host-contracts"
                                    $.post(pathPost,
                                    {
                                        query: query,
                                    },
                                    function(data,status){

                                        renderHostContractsSummary(data)

                                        renderHostTimeline(data)

                                        document.getElementById("loader").style.display = 'none'
                                        document.getElementById("loader2").style.display = 'none'
                                        document.getElementById("loader4").style.display = 'none'
                                        adjustWidth()
                                    });
                                });

                                function renderHostContractsSummary(data) {
                                    var failRate = ((parseInt(data[0].countfail) / (parseInt(data[0].countfail) + parseInt(data[0].countsuccess) + parseInt(data[0].countunused)))*100).toFixed(1)
                                    var totalContracts = data[0].countongoing + data[0].countsuccess + data[0].countfail + data[0].countunused
                                    // Renders the balance table of the batch of wallets
                                    var tableCode = '<div class="home-outer" style="height:400px">'
                                        + '<div class="home-inner table-address" style="padding: 0 25 0 25; width: 550">'
                                            + '<div class="home-element">'
                                                + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                    + '<thead>'
                                                        + '<tr style="height: 25px; background:#ffffff;">'
                                                            + '<th colspan="2" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Host contracts summary:</font></strong></span>'
                                                            + '</th>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Contracts found on the blockchain</td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + totalContracts + '</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Ongoing contracts </td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + data[0].countongoing + '</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Completed: succeded </td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + data[0].countsuccess + '</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Completed: failed </td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + data[0].countfail + '</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Completed: unused </td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + data[0].countunused + '</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Failure rate </td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + failRate + '%</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Net revenue from succeeded contracts</td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + readable(data[0].revenuegain) + ' SC</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Lost from failed contracts</td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + readable(data[0].revenuelost) + ' SC</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center;"> Total net revenue</td>'
                                                            + '<td style="height: 40px; padding: 0 15 0 15; font-size:100%; vertical-align:center; text-align: right">' + readable(data[0].revenuenet) + ' SC</td>'
                                                        + '</tr>'
                                                    + '</thead>'
                                                + '</table>'
                                            + '</div>'
                                        + '</div>'
                                        + '<div class="home-inner table-outer" style="width: 550px; height:450px; padding: 0 0 0 25">'
                                            + '<div id="card" style="height:175px; text-align: center">'
                                                + '<div class="container" id = "container" style = "height: 385px; margin: 0 auto" bgcolor="#ffffff"></div>'
                                            + '</div>'
                                        + '</div>'
                                    + '</div>'
                                        
                                    document.getElementById('content5').innerHTML = tableCode
                                    document.getElementById("content5").style.display = 'block'

                                    renderHostChart(data)
                                    
                                }

                                function renderHostChart(data) {
                                    // Adds a Highcharts pie chart on the container div created on the parent function  t
                                    $('#container').highcharts({
                                        chart: {
                                            plotBackgroundColor: null,
                                            plotBorderWidth: 0,
                                            plotShadow: false,
                                            spacingTop: 50,
                                        },
                                        colors: [
                                            '#53c586',
                                            '#cfc56f',
                                            '#dd5e5e'
                                        ],
                                        title: {
                                            text: '<b>Completed contracts</b>',
                                            align: 'center',
                                            verticalAlign: 'top',
                                            y: -20,
                                            style: {
                                                color: '#8c8c8c',
                                                fontFamily: 'Lato',
                                                fontSize:'18px',
                                                fontWeight: '700'
                                            }
                                        },
                                        plotOptions: {
                                            pie: {
                                                allowPointSelect: true,
                                                cursor: 'pointer',
                                                showInLegend: false,
                                                dataLabels: {
                                                    enabled: true,
                                                    style: {
                                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                                    }
                                                }
                                            },
                                        },
                                        credits:{enabled:false},
                                        series: [{
                                            type: 'pie',
                                            name: 'Completed contracts',
                                            innerSize: '30%',
                                            data: [
                                                ['Succeeded',   data[0].countsuccess],
                                                ['Unused',   data[0].countunused],
                                                ['Failed',   data[0].countfail]]
                                        }]
                                    });
                                }

                                function renderHostTimeline(data) {
                                    // Shows a timeline representation of the contract

                                    // A table header
                                    var div = document.createElement('div');
                                    div.className = 'row';
                                    div.innerHTML =
                                        '<div style="margin: 100">'
                                            + '<table id="table-fill" class="table-outer" style="width: 1150px; height: 25px; margin: 0 auto;">' 
                                                + '<thead>'
                                                    + '<tr style="background:#ffffff;">'
                                                        + '<th class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                            + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">File Contracts timeline:</font></strong></span>'
                                                        + '</th>'
                                                    + '</tr>'
                                                + '</thead>'
                                            + '</table>'
                                            + '<div id="timeline" class="table-outer" style="height: 800px; margin: 0 auto; padding: 0 auto; width: 1150px" ></div>'
                                        + '</div>'
                                    document.getElementById('content6').appendChild(div);
                                    document.getElementById("content6").style.display = 'block'
                                    
                                    // Google charts timeline
                                    google.charts.load('current', {'packages':['timeline']});
                                    google.charts.setOnLoadCallback(drawChart);
                                    function drawChart() {

                                        // Preparing the data array
                                        var array = []
                                        var colors = []
                                        for (var i = 0; i < data[1].contracts.length; i++) {
                                            var c = data[1].contracts[i]
                                            if (c.statusnavigator == "ongoing") {
                                                newColor = "#505050"
                                            } else if (c.statusnavigator == "complete-succ") {
                                                newColor = "#53c586"
                                            } else if (c.statusnavigator == "complete-fail") {
                                                newColor = "#dd5e5e"
                                            } else {
                                                newColor = "#cfc56f"
                                            }
                                            colors.push(newColor)
                                            var timestamp = parseInt(c.timestamp)
                                            var contractStart = new Date(timestamp * 1000)
                                            var contractEndPre = timestamp + (c.duration * 600)
                                            var contractEnd = new Date(contractEndPre * 1000)
                                            var row = ["c" + i, c.contractId, customHTMLTooltip(c, newColor), contractStart, contractEnd]
                                            array.push(row)
                                            
                                        }
                                        
                                        //Rendering
                                        var container = document.getElementById('timeline');
                                        document.getElementById('content6').appendChild(div);
                                        var chart = new google.visualization.Timeline(container);
                                        var dataTable = new google.visualization.DataTable();

                                        dataTable.addColumn({ type: 'string', id: 'Contract' });
                                        dataTable.addColumn({ type: 'string', id: 'Name' });
                                        dataTable.addColumn({ type: 'string', role: 'tooltip', p: {'html': true}});
                                        dataTable.addColumn({ type: 'date', id: 'Start' });
                                        dataTable.addColumn({ type: 'date', id: 'End' });
                                        
                                        dataTable.addRows(array)

                                        var options = {
                                            timeline: { showBarLabels: false, 
                                                rowLabelStyle: { fontSize: 11 }, barLabelStyle: { fontSize: 3 }  // Reduces the height of the rows
                                            },
                                            colors: colors,
                                            // Use an HTML tooltip.
                                            tooltip: { isHtml: true }
                                        };

                                        chart.draw(dataTable, options);
                                    }
                                }

                                function customHTMLTooltip(c, newColor) {
                                    var start = timeConverter(c.timestamp)
                                    var endPre = parseInt(c.timestamp) + (c.duration * 600)
                                    var end = timeConverter(endPre)
                                    var duration = Math.round(c.duration/144)
                                    var size = (c.filesize / 1000000000).toFixed(2)
                                    return '<div style="padding: 10px;"><span style="font-weight: 700"> Contract ID: ' + c.contractId + '</span><br>'
                                        + '<span> Status (according to Navigator): </span><span style="font-weight: 700; color:' + newColor + '">' + c.statusnavigator + '</span><br>'
                                        + '<span> Status (according to report): </span><span style="font-weight: 700">' + c.status + '</span><br>'
                                        + 'Start: ' + start + '<br>'
                                        + 'End (estimated): ' + end + '<br>'
                                        + 'Duration: ' + duration + ' days<br>'
                                        + 'Size (only complete contracts): ' + size + ' GB<br>'
                                        + 'Locked collateral: ' + c.locked + '<br>'
                                        + 'Risked collateral: ' + c.risked + '<br>'
                                        + 'Potential revenue: ' + c.revenue
                                        + '</div>';

                                }


                                // ADDRESSES BATCH SEARCH
                                $("button[name = 'addressesBatch']").click(function(){
                                    // Hiding elements
                                    document.getElementById("header").style.display = 'none'; 
                                    document.getElementById("inset").style.display = 'none'
                                    document.getElementById("content").style.display = 'none'
                                    document.getElementById("content2").style.display = 'none'
                                    document.getElementById("content3").style.display = 'none'
                                    document.getElementById("content4").style.display = 'none'
                                    document.getElementById("content5").style.display = 'none'
                                    document.getElementById("content6").style.display = 'none'
                                    document.getElementById("loader").style.display = 'block'
                                    document.getElementById("loader2").style.display = 'block'
                                    document.getElementById("loader4").style.display = 'block'

                                    query = document.getElementById("addressesInput").value
                                    query = query.slice(0,100000)

                                    var pathPost = apiPath + "/addresses"
                                    $.post(pathPost,
                                    {
                                        query: query,
                                    },
                                    function(data,status){

                                        renderWalletSummary(data)

                                        renderWalletAddresses(data)

                                        renderWalletTxs(data)

                                        document.getElementById("loader").style.display = 'none'
                                        document.getElementById("loader3").style.display = 'none'
                                        document.getElementById("loader4").style.display = 'none'
                                        adjustWidth()
                                    });
                                });

                                function renderWalletSummary(data) {
                                    // Renders the balance table of the batch of wallets
                                    var tableCode = '<div class="home-outer" style="height:225px">'
                                        + '<div class="home-inner table-address" style="padding: 0 25 0 25; width: 700; height:225px">'
                                            + '<div class="home-element">'
                                                + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                    + '<thead>'
                                                        + '<tr style="height: 25px; background:#ffffff;">'
                                                            + '<th colspan="2" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Wallet summary:</font></strong></span>'
                                                            + '</th>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Siacoin balance: </td>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center; text-align: right">' + readable(data[0].balanceSc) + ' SC</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Siafund balance: </td>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center; text-align: right">' + data[0].balanceSf + ' SF</td>'
                                                        + '</tr>'
                                                        + '<tr>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Number of transactions: </td>'
                                                            + '<td style="height: 50px; padding: 0 15 0 15; font-size:120%; vertical-align:center; text-align: right">' + data[0].TotalTxCount + '</td>'
                                                        + '</tr>'
                                                    + '</thead>'
                                                + '</table>'
                                            + '</div>'
                                        + '</div>'
                                        + '<div class="home-inner qr-code" style="height:175px; padding: 0 0 75 25; width: 400">'
                                            + '<div id="card" style="height:175px; text-align: center;">'
                                                + '<IMG style="margin: 0 75 auto;" src="assets/nav/wallet_big.png"></IMG>'
                                            + '</div>'
                                        + '</div>'
                                    + '</div>'
                                        
                                    document.getElementById('content5').innerHTML = tableCode
                                    document.getElementById("content5").style.display = 'block'  
                                }

                                function renderWalletAddresses(data) {
                                    // Shows the list of changes in balance for a particular address

                                    var addresses = data[1].addresses
                                    // Only addresses with positive balance
                                    var positiveAddresses = []
                                    for (var i = 0; i < addresses.length; i++) {
                                        if (addresses[i].sc > 0 || addresses[i].sf > 0) {
                                            positiveAddresses.push(addresses[i])
                                        }
                                    }

                                    var div = document.createElement('div');
                                    div.className = 'row';
                                    var tableCode = '<table id="table-fill" class="table-outer" style="width: 1150px">' 
                                        + '<thead>'
                                            + '<tr style="background:#ffffff;">'
                                                + '<th colspan="2" class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Addresses with positive balance:</font></strong></span>'
                                                + '</th>'
                                            + '</tr>'
                                    for (var n = 0; n < positiveAddresses.length; n++) {
                                        var value = positiveAddresses[n].sc
                                        if (value < 0) {value = 0} // This avoids artifacts like "-0.000"

                                        tableCode = tableCode + '<tr style="height: 40px">'
                                                + '<td style="font-size:small; border-right: 0px"><a href="navigator?search=' + positiveAddresses[n].address + '" style="display:block; color:#403f3f">'
                                                    + shortHash(positiveAddresses[n].address) + '</a></td>'
                                                + '<td style="border-right: 0px; font-weight: 700; font-size:90%; text-align: right">' 
                                                    + readable(value) + ' SC / ' + positiveAddresses[n].sf + ' SF</td>'
                                            + '</tr>'
                                    }
                                         
                                    // This closes the table
                                    tableCode = tableCode + '</thead> </table>'
                                    div.innerHTML = tableCode
                                    document.getElementById('content5').appendChild(div);
                                }

                                function renderWalletTxs(data) {
                                    // Shows merged transactions of the addresses
                                    var txs = data[2].last100Transactions
                                    txs.sort(function(a, b) {
                                        return parseFloat(b.Height) - parseFloat(a.Height);
                                    })
                                    var path = apiPath + "/status"
                                    $.getJSON(path, function(auxblock) { // Loads auxblock

                                        var container = "content6"
                                        renderAddressList(txs, auxblock, container)
                                        
                                    })
                                }


                            // REST OF THE FUNCTIONS  
                                
                                var path = apiPath + "/status"
                                $.getJSON(path, function(auxblock) {
                                    
                                    // This gets the current search query from the URL
                                    var url = window.location
                                    url = "u" + url
                                    var slice = url.search("navigator")
                                    var searchQuery = url.slice(slice + 17)

                                    if (searchQuery.length == 64 || searchQuery.length == 76 || parseInt(searchQuery) >= 0) { // It is a valid hash
                                        
                                        var jsonPath = apiPath + '/hash/' + searchQuery
                                        $.getJSON(jsonPath, function(data) {
                                            
                                            // Hiding loader
                                            document.getElementById("loader").style.display = 'none';
                                            document.getElementById("loader3").style.display = 'none';
                                            
                                            if (data != "") { // The api returned something different than an empty array
                                                // 1 - The first thing to show is the hash type header
                                                document.getElementById("header").style.display = 'block'; 
                                                document.getElementById("inset").style.display = 'block'
                                                var hashType = renderHeader(data, searchQuery)

                                                // 2 - Unless it is a block, or an address, the next element is the transaction scheme 
                                                if (data[0].Type == "block") {
                                                    // Metadata of the block
                                                    renderBlockMetadata(data)

                                                    // List of transactions
                                                    renderTxInBlock(data)

                                                } else if (data[0].Type == "address") {
                                                    // QR code of the address and sumary table
                                                    renderQrAndBalance(data, searchQuery)

                                                    // List of transactions
                                                    var txs = data[1].last100Transactions
                                                    var container = 'content2'
                                                    renderAddressList(txs, auxblock, container)

                                                    adjustWidth()
                                                    
                                                } else if (data[0].Type == "unconfirmed") {

                                                    renderUnconfirmed()
                                                    
                                                } else {
                                                    // Scheme of the transaction
                                                    renderScheme(data)

                                                    // Transaction metadata table
                                                    renderTxTable(data, hashType)

                                                    // In case of file contract render 2 extra elements: related operations and timeline graph
                                                    if (data[0].Type == "contract") {
                                                        renderContractRelated(data)
                                                        renderContractTimeline(data)
                                                    }
                                                    // Readjsut the widths of all the elements
                                                    adjustWidth()
                                                    
                                                }
                                                
                                                //Hidding elements after loading
                                                document.getElementById("loader2").style.display = 'none';
                                                
                                                
                                            } else {
                                                // Error: hash not found
                                                renderError(searchQuery)
                                            }

                                        });

                                    } else if (searchQuery.length == 0 ) { // Default screen, with last blocks and last TX tables, a chart...
                                        var path = apiPath + "/landing"
                                        $.getJSON(path, function(landing) { // Loading data
                                            renderLandingPage(auxblock, landing)
                                            
                                            // Hiding elements
                                            document.getElementById("loader").style.display = 'none';
                                            document.getElementById("loader2").style.display = 'none';
                                            document.getElementById("loader3").style.display = 'none';

                                            // Readjsut the widths of all the elements
                                            adjustWidth()
                                        })

                                    } else { // Invalid search
                                        document.getElementById("loader").style.display = 'none';
                                        document.getElementById("loader3").style.display = 'none';
                                        document.getElementById("result").innerHTML = "Invalid search"

                                    }
                                    
                                    
                                    function renderUnconfirmed() {
                                        // Renders Unconfirmed message
                                        document.getElementById("inset").style.display = 'none'

                                        var now = new Date()
                                        var hour = now.getHours();
                                        if (hour < 10) {hour = "0" + hour}
                                        var min = now.getMinutes();
                                        if (min < 10) {min = "0" + min}
                                        var sec = now.getSeconds();
                                        if (sec < 10) {sec = "0" + sec}
                                        var time = hour + ':' + min + ':' + sec 

                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<div style="height: 100px"></div>'
                                                + '<div style="width: 600; margin: 0 auto; padding: 0 25">'
                                                    + '<div style="width: 106; color: #9eb4a9; float: left;">'
                                                        + '<img src="assets/nav/clock.png" alt="clock" height="150" width="106"></div>'
                                                    + '<div style="width: 480; color: #9eb4a9; text-align: left; float: right">'
                                                        + '<span style="font-size: 40">Unconfirmed transaction<br></span>'
                                                        + '<span style="font-size: 20">The transaction was broadcated to the network and it is waiting to be included in a block.<br></span>'
                                                        + '<span style="font-size: 20">This page will refresh every minute and show the full TX information once confirmed. Last check: ' + time + '.</span>'
                                                    + '</div>'
                                                + '</div>'
                                            + '<div style="height: 400px"></div>'
                                        div.innerHTML = tableCode
                                        document.getElementById('content').appendChild(div);

                                        // Reloads the page after 1 minute
                                        setTimeout(function(){
                                            location.reload()
                                        }, 60000);
                                    }
                                    

                                    function renderLandingPage(auxblock, landing) {
                                        // 4 tables with recent elements in the blockchain
                                        // First row of two tables:
                                        var tableCode = '<div class="home-outer" style="height:400px">'
                                            + '<div class="home-inner table-address" style="padding: 0 25 0 25; width: 550; height:400px">'
                                                + '<div class="home-element">'
                                                    + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                        + '<thead>'
                                                            + '<tr style="height: 25px; background:#ffffff;">'
                                                                + '<th colspan="3" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Recent blocks:</font></strong></span>'
                                                                + '</th>'
                                                            + '</tr>'
                                        for (var i = 0; i < 10; i++) {
                                            tableCode = tableCode 
                                                            +'<tr style="height: 36px">'
                                                                + '<td style="font-size:90%; border-right: 0px; font-weight: 700"><a href="navigator?search=' + (auxblock.lastblock - i) + '" style="display:block; color:#403f3f">'
                                                                    + "Block #" + (auxblock.lastblock - i) + '</a></td>'
                                                            + '</tr>'
                                        } 
                                        tableCode = tableCode
                                                        + '</thead>'
                                                    + '</table>'
                                                + '</div>'
                                            + '</div>'
                                            + '<div class="home-inner table-outer" style="width: 550px; height:400px; padding: 0 0 0 25">'
                                                + '<div class="home-element">'
                                                    + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                        + '<thead>'
                                                            + '<tr style="height: 25px; background:#ffffff;">'
                                                                + '<th colspan="3" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Recent SC transactions:</font></strong></span>'
                                                                + '</th>'
                                                            + '</tr>'
                                        for (var i = 0; i < landing[0].last10ScTx.length; i++) {
                                            tableCode = tableCode 
                                                            +'<tr style="height: 35px">'
                                                                + '<td style="border-right: 0px">'
                                                                    + '<IMG style="vertical-align:middle" SRC="/assets/nav/sctx_b.png" ALT="hash type" WIDTH=25 HEIGHT=25></td>'
                                                                + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:small"><a href="navigator?search=' + landing[0].last10ScTx[i].TxHash + '" style="display:block; color:#403f3f">SC Tx</a></td>'
                                                                + '</td>'
                                                                + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + landing[0].last10ScTx[i].TxHash + '" style="display:block; color:#403f3f">'
                                                                    + miniHash(landing[0].last10ScTx[i].TxHash) + '</a></td>'
                                                            + '</tr>'
                                        } 
                                        tableCode = tableCode                
                                                        + '</thead>'
                                                    + '</table>'
                                                + '</div>'
                                            + '</div>'
                                        + '</div>'

                                        // Second row of tables:
                                        tableCode = tableCode + '<div class="home-outer" style="height:400px">'
                                            + '<div class="home-inner table-address" style="padding: 0 25 0 25; width: 550; height:400px">'
                                                + '<div class="home-element">'
                                                    + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                        + '<thead>'
                                                            + '<tr style="height: 25px; background:#ffffff;">'
                                                                + '<th colspan="3" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Recent file contract activity:</font></strong></span>'
                                                                + '</th>'
                                                            + '</tr>'
                                        for (var i = 0; i < landing[1].last10Contracts.length; i++) {
                                            tableCode = tableCode 
                                                            +'<tr style="height: 35px">'
                                                                + '<td style="border-right: 0px">'
                                                                    + '<IMG style="vertical-align:middle" SRC=' + iconLanding(landing[1].last10Contracts[i].TxType) + ' ALT="hash type" WIDTH=25 HEIGHT=25></td>'
                                                                + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:small"><a href="navigator?search=' + landing[1].last10Contracts[i].TxHash + '" style="display:block; color:#403f3f">' + prettyTxType(landing[1].last10Contracts[i].TxType) + '</a></td>'
                                                                + '</td>'
                                                                + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + landing[1].last10Contracts[i].TxHash + '" style="display:block; color:#403f3f">'
                                                                    + miniHash(landing[1].last10Contracts[i].TxHash) + '</a></td>'
                                                            + '</tr>'
                                        } 
                                        tableCode = tableCode 
                                                        + '</thead>'
                                                    + '</table>'
                                                + '</div>'
                                            + '</div>'
                                            + '<div class="home-inner table-outer" style="width: 550px; height:425px; padding: 0 0 0 25">'
                                                + '<div class="home-element">'
                                                    + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                        + '<thead>'
                                                            + '<tr style="height: 25px; background:#ffffff;">'
                                                                + '<th colspan="3" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Recent other transactions:</font></strong></span>'
                                                                + '</th>'
                                                            + '</tr>'
                                        for (var i = 0; i < landing[2].last10Others.length; i++) {
                                            tableCode = tableCode 
                                                            +'<tr style="height: 35px">'
                                                                + '<td style="border-right: 0px">'
                                                                    + '<IMG style="vertical-align:middle" SRC=' + iconLanding(landing[2].last10Others[i].TxType) + ' ALT="hash type" WIDTH=25 HEIGHT=25></td>'
                                                                + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:small"><a href="navigator?search=' + landing[2].last10Others[i].TxHash + '" style="display:block; color:#403f3f">' + prettyTxType(landing[2].last10Others[i].TxType) + '</a></td>'
                                                                + '</td>'
                                                                + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + landing[2].last10Others[i].TxHash + '" style="display:block; color:#403f3f">'
                                                                    + miniHash(landing[2].last10Others[i].TxHash) + '</a></td>'
                                                            + '</tr>'
                                        } 
                                        tableCode = tableCode                
                                                        + '</thead>'
                                                    + '</table>'
                                                + '</div>'
                                            + '</div>'
                                        + '</div>'

                                        // Adjustable width chart
                                        var w = $(window).width();
                                        if (w >= 1200) {
                                            tableCode = tableCode
                                                + '<div class="container2" id="container2" style = "height: 550px; margin: 100 auto; padding: 0 25 0 25; width: 1150" bgcolor="#ffffff"></div>'
                                        } else if (w < 1200 && w >= 800) {
                                            tableCode = tableCode
                                                + '<div class="container2" id="container2" style = "height: 550px; margin: 100 auto; padding: 0 25 0 25; width: 750" bgcolor="#ffffff"></div>'
                                                + '<div style="margin: 1000 auto" ></div>'
                                        } else if (w < 800) {
                                            tableCode = tableCode
                                                + '<div class="container2" id="container2" style = "height: 550px; margin: 100 auto; padding: 0 25 0 25; width: 550" bgcolor="#ffffff"></div>'
                                                + '<div style="margin: 1000 auto" ></div>'
                                        }


                                        document.getElementById('content5').innerHTML = tableCode
                                        document.getElementById("content5").style.display = 'block'

                                        renderDistributionChart(landing)

                                        adjustWidth()
                                        
                                    }

                                    function renderDistributionChart(data) {

                                        var colors = Highcharts.getOptions().colors

                                        // Adds a Highcharts pie chart on the container div created on the parent function
                                        $('#container2').highcharts({
                                            chart: {
                                                plotBackgroundColor: null,
                                                plotBorderWidth: 0,
                                                plotShadow: false,
                                                spacingTop: 50,
                                            },
                                            colors: [
                                                '#53c586',
                                                '#82dbaa',
                                                '#996fcd',
                                                '#a484cb',
                                                '#b095d1',
                                                '#bca6d7',
                                                '#c3b2d8',
                                                '#ccc4d7',
                                                '#34b0c2',
                                                '#84ccd7'
                                            ],
                                            title: {
                                                text: '<b>Blockchain usage: last 10 000 transaction</b>',
                                                align: 'center',
                                                verticalAlign: 'top',
                                                y: -20,
                                                style: {
                                                    color: '#8c8c8c',
                                                    fontFamily: 'Lato',
                                                    fontSize:'18px',
                                                    fontWeight: '700'
                                                }
                                            },
                                            plotOptions: {
                                                pie: {
                                                    shadow: false,
                                                    allowPointSelect: true,
                                                    cursor: 'pointer',
                                                    showInLegend: false,
                                                    dataLabels: {
                                                        enabled: true,
                                                        style: {
                                                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                                        }
                                                    }
                                                },
                                            },
                                            credits:{enabled:false},
                                            series: [{
                                                type: 'pie',
                                                name: 'Transactions distribution',
                                                innerSize: '60%',
                                                data: [{
                                                    name: 'Siacoin Txs',
                                                    y: data[3].sctx,
                                                },{
                                                    name: 'Siafund Txs',
                                                    y: data[3].sftx,
                                                },{
                                                    name: 'Contract formations',
                                                    y: data[3].contracts,
                                                },{
                                                    name: 'Allowance posting',
                                                    y: data[3].allowance,
                                                },{
                                                    name: 'Collateral posting',
                                                    y: data[3].collateral,
                                                }
                                                ,{
                                                    name: 'Contract revisions',
                                                    y: data[3].revisions,
                                                },{
                                                    name: 'Contract resolutions',
                                                    y: data[3].resolutions,
                                                },{
                                                    name: 'Proofs of storage',
                                                    y: data[3].storageproofs,
                                                },{
                                                    name: 'Host announcements',
                                                    y: data[3].hostannouncements,
                                                },{
                                                    name: 'Block rewards',
                                                    y: data[3].blockreward,
                                                }]
                                            }]
                                        });

                                        
                                    }

                                    function prettyTxType(type) {
                                        if (type == "host ann") {var newType = "Host announcement"}
                                        else if (type == "blockreward") {var newType = "Block reward"}
                                        else if (type == "SfTx") {var newType = "SF Tx"}
                                        else if (type == "contract") {var newType = "Formation"}
                                        else if (type == "contractresol") {var newType = "Resolution"}
                                        else if (type == "revision") {var newType = "Revision"}
                                        else if (type == "storageproof") {var newType = "Storage proof"}
                                        return newType
                                    }

                                    function miniHash(hash) {
                                        var shortHash = hash.slice(0,40) + "..."
                                        return shortHash
                                    }

                                    function iconLanding(type) {
                                        if (type == "host ann") {var icon = "/assets/nav/hostann_b.png"}
                                        else if (type == "blockreward") {var icon = "/assets/nav/miner_b.png"}
                                        else if (type == "SfTx") {var icon = "/assets/nav/sftx_b.png"}
                                        else if (type == "contract") {var icon = "/assets/nav/contract_b.png"}
                                        else if (type == "contractresol") {var icon = "/assets/nav/resolution_b.png"}
                                        else if (type == "revision") {var icon = "/assets/nav/revision_b.png"}
                                        else if (type == "storageproof") {var icon = "/assets/nav/storageproof_b.png"}
                                        return icon
                                    }

                                    
                                    function renderHeader(data, searchQuery) {
                                        // Translating the hash types to legible and rendering the header
                                        var hashType
                                        if (data[0].Type == "ScTx") {
                                            hashType = "Siacoin transaction"
                                            document.getElementById('header_logo').src = "assets/nav/sctx.png"}
                                        else if (data[0].Type == "SfTx") {
                                            hashType = "Siafund transaction"
                                            document.getElementById('header_logo').src = "assets/nav/sftx.png"}
                                        else if (data[0].Type == "storageproof") {
                                            hashType = "Storage Proof"
                                            document.getElementById('header_logo').src = "assets/nav/storageproof.png"}
                                        else if (data[0].Type == "blockreward") {
                                            hashType = "Block reward"
                                            document.getElementById('header_logo').src = "assets/nav/miner.png"}
                                        else if (data[0].Type == "block") {
                                            hashType = "Block"
                                            if (searchQuery.length < 7) { // If searched item is a block height, use a bigger font size
                                                document.getElementById("header3").style.fontSize = "26px";
                                            }
                                            document.getElementById('header_logo').src = "assets/nav/block.png"}
                                        else if (data[0].Type == "allowancePost") {
                                            hashType = "Allowance posting"
                                            document.getElementById('header_logo').src = "assets/nav/allowance.png"}
                                        else if (data[0].Type == "collateralPost") {
                                            hashType = "Collateral posting"
                                            document.getElementById('header_logo').src = "assets/nav/collateral.png"}
                                        else if (data[0].Type == "address") {
                                            hashType = "Address"
                                            document.getElementById("header3").style.fontSize = "15px"
                                            document.getElementById('header_logo').src = "assets/nav/address.png"}
                                        else if (data[0].Type == "contractresol") {
                                            hashType = "Contract resolution"
                                            document.getElementById('header_logo').src = "assets/nav/resolution.png"}
                                        else if (data[0].Type == "revision") {
                                            hashType = "Contract revision"
                                            document.getElementById('header_logo').src = "assets/nav/revision.png"}
                                        else if (data[0].Type == "contract") {
                                            hashType = "File Contract formation"
                                            document.getElementById('header_logo').src = "assets/nav/contract.png"}
                                        else if (data[0].Type == "host ann") {
                                            hashType = "Host announcement"
                                            document.getElementById('header_logo').src = "assets/nav/hostann.png"}
                                        else if (data[0].Type == "unconfirmed") {
                                            hashType = "Unconfirmed transaction"
                                            document.getElementById('header_logo').src = "assets/nav/unconfirmed.png"}
                                        document.getElementById("header2").innerHTML = hashType
                                        document.getElementById("header3").innerHTML = shortHash(searchQuery)

                                        // Confirmations of the TX, unless the hash is an address
                                        if (data[0].Type == "unconfirmed") {
                                            document.getElementById("header4").innerHTML = "Unconfirmed"
                                            document.getElementById("header5").style.backgroundColor = "#dd5e5e"
                                            document.getElementById("header6").style.backgroundColor = "#dd5e5e"
                                        } else if (data[0].Type != "address") {
                                            var confirmationsNum = auxblock.consensusblock - data[1].Height + 1
                                            if (confirmationsNum > 72) {confirmationsNum = "72+"}
                                            document.getElementById("header4").innerHTML = confirmationsNum + " confirmations"
                                            if (confirmationsNum >= 10 && confirmationsNum < 72) {
                                                document.getElementById("header5").style.backgroundColor = "#a3cf2c"
                                                document.getElementById("header6").style.backgroundColor = "#a3cf2c"
                                            } else if (confirmationsNum < 10) {
                                                document.getElementById("header5").style.backgroundColor = "#cfbe2c"
                                                document.getElementById("header6").style.backgroundColor = "#cfbe2c"
                                            } else {
                                                document.getElementById("header5").style.backgroundColor = "#2ccf75"
                                                document.getElementById("header6").style.backgroundColor = "#2ccf75"
                                            }
                                        }

                                        return hashType // This will help with the TX table
                                    }

                                    function renderScheme(data) {
                                        // This assembles the Scheme: a transaction representation with inputs at the left and outputs at the right, connected with an arrow
                                        // Boolean to identify the first receiver:
                                        firstReceiverBool = true

                                        // SENDERS
                                        if (data[0].Type != "contract") {
                                            for (var n = 0; n < data[2].transactions.length; n++) {
                                                // Address
                                                var addressInBox = shortHash(data[2].transactions[n].Address)
                                                // Link
                                                var linkInBox = "navigator?search=" + data[2].transactions[n].Address
                                                // Color of value change. By default red, in SF orange
                                                var colorInBox = "red"
                                                
                                                // Identifying senders
                                                if (data[2].transactions[n].ScChange < 0 || data[2].transactions[n].SfChange < 0) {
                                                    
                                                    if (data[2].transactions[n].ScChange < 0) {
                                                        var valueInBox = data[2].transactions[n].ScChange // Push the change in SC
                                                        valueInBox = readable(valueInBox) + " SC"
                                                    } else if (data[2].transactions[n].SfChange < 0) {
                                                        var valueInBox = data[2].transactions[n].SfChange + " SF" // Push the change in SF
                                                    }
                                                    
                                                    // Naming the sending object
                                                    if (data[0].Type == "ScTx" || data[0].Type == "SfTx") {var objectInBox = "Sender address"}
                                                    else if (data[0].Type == "host ann") {var objectInBox = "Host address"}
                                                    else if (data[0].Type == "allowancePost") {var objectInBox = "Renter address"}
                                                    else if (data[0].Type == "collateralPost" || data[0].Type == "storageproof") {var objectInBox = "Host address"}
                                                    else if (data[0].Type == "revision") {var objectInBox = "Address"}

                                                    // Color
                                                    if (data[0].Type == "SfTx" && data[2].transactions[n].SfChange < 0) {colorInBox = "orange"}

                                                    // Image
                                                    if (data[0].Type == "ScTx" || data[0].Type == "SfTx" || data[0].Type == "revision") {var iconInBox = "assets/nav/address.png"}
                                                    else if (data[0].Type == "host ann") {iconInBox = "assets/nav/host.png"}
                                                    else if (data[0].Type == "allowancePost") {iconInBox = "assets/nav/renter.png"}
                                                    else if (data[0].Type == "collateralPost" || data[0].Type == "storageproof") {iconInBox = "assets/nav/host.png"}

                                                    // Pushing the Box to the Scheme
                                                    addRowSender(objectInBox, linkInBox, addressInBox, valueInBox, iconInBox, colorInBox)

                                                }
                                            } 
                                        } 

                                        // Special cases
                                        if (data[0].Type == "contractresol") {
                                            var objectInBox = "File Contract ID"
                                            var colorInBox = "#403f3f"
                                            var iconInBox = "assets/nav/contract.png"
                                            var contractInBox = shortHash(data[1].ContractId)
                                            var linkInBox = "navigator?search=" + data[1].ContractId
                                            var valueInBox = readable(data[1].Output0Value + data[1].Output1Value + data[1].Output2Value) + " SC"
                                            addRowSender(objectInBox, linkInBox, contractInBox, valueInBox, iconInBox, colorInBox)
                                        }

                                        if (data[0].Type == "contract") {
                                            var objectInBox = "Renter: allowance posting hash"
                                            var colorInBox = "red"
                                            var iconInBox = "assets/nav/allowance.png"
                                            var addressInBox = shortHash(data[1].AllowancePosting)
                                            var linkInBox = "navigator?search=" + data[1].AllowancePosting
                                            var valueInBox = "- " + readable(data[1].RenterValue) + " SC"
                                            addRowSender(objectInBox, linkInBox, addressInBox, valueInBox, iconInBox, colorInBox)
                                            
                                            var objectInBox2 = "Host: collateral posting hash"
                                            var iconInBox2 = "assets/nav/collateral.png"
                                            var addressInBox2 = shortHash(data[1].CollateralPosting)
                                            var linkInBox2 = "navigator?search=" + data[1].CollateralPosting
                                            var valueInBox2 = "- " + readable(data[1].HostValue) + " SC"
                                            addRowSender(objectInBox2, linkInBox2, addressInBox2, valueInBox2, iconInBox2, colorInBox)
                                        }

                                        // Small boxes with only 2 rows for special TX types (block reward...)
                                        if (data[0].Type == "blockreward") {
                                            var objectInBox = "Coinbase"
                                            var colorInBox = "#403f3f"
                                            var iconInBox = "assets/nav/network.png"
                                            var linkInBox = ""
                                            var sizeInBox = 4
                                            var subsidy =  300000 - data[1].Height
                                            if (subsidy < 30000) {subsidy = 30000} // Minimal future subsidy
                                            subsidyReadable = readable(subsidy * 1000000000000000000000000) + " SC"
                                            addSimpleSenderBox(objectInBox, subsidyReadable, colorInBox, iconInBox, linkInBox, sizeInBox)
                                            
                                            var minedFees = readable(data[2].transactions[0].ScChange - (subsidy * 1000000000000000000000000)) + " SC"
                                            var objectInBox = "Collected transaction fees"
                                            addSimpleSenderBox(objectInBox, minedFees, colorInBox, iconInBox, linkInBox, sizeInBox)
                                        }

                                        // RECEIVERS
                                        if (data[0].Type != "contractresol" && data[0].Type != "contract") { // Resolutions and contracts are treated differently
                                            for (var n = 0; n < data[2].transactions.length; n++) {
                                                // Address
                                                var addressInBox = shortHash(data[2].transactions[n].Address)
                                                // Link
                                                var linkInBox = "navigator?search=" + data[2].transactions[n].Address
                                                // Color of value change. By default green, in SF purple
                                                var colorInBox = "#2ba84b"

                                                // In contracts, instead of the destination address I show the final contract ID
                                                if ((data[0].Type == "allowancePost" || data[0].Type == "collateralPost") && data[2].transactions[n].TxType == "contractform") {
                                                    var addressInBox = shortHash(data[1].HashSynonyms)
                                                    var linkInBox = "navigator?search=" +data[1].HashSynonyms
                                                }
                                                
                                                // Identifying receivers
                                                if (data[2].transactions[n].ScChange > 0 || data[2].transactions[n].SfChange > 0) {
                                                    if (data[2].transactions[n].ScChange > 0) {
                                                        var valueInBox = data[2].transactions[n].ScChange // Push the change in SC
                                                        valueInBox = readable(valueInBox) + " SC"
                                                    } else if (data[2].transactions[n].SfChange > 0) {
                                                        var valueInBox = data[2].transactions[n].SfChange + " SF" // Push the change in SF
                                                    }

                                                    // Naming the receiving object
                                                    if (data[0].Type == "ScTx") {var objectInBox = "Receiver address"}
                                                    else if (data[0].Type == "SfTx" && data[2].transactions[n].TxType != "SfClaim" && data[2].transactions[n].SfChange > 0) {var objectInBox = "Receiver address"}
                                                    else if (data[0].Type == "SfTx" && data[2].transactions[n].TxType != "SfClaim" && data[2].transactions[n].ScChange > 0) {var objectInBox = "Sender wallet return (unspent output)"}
                                                    else if (data[0].Type == "SfTx" && data[2].transactions[n].TxType == "SfClaim") {var objectInBox = "SiaFund dividend claim address (sender)"}
                                                    else if (data[0].Type == "host ann") {var objectInBox = "Host address"}
                                                    else if (data[0].Type == "allowancePost" && data[2].transactions[n].TxType != "contractform") {var objectInBox = "Renter address"}
                                                    else if (data[0].Type == "allowancePost" && data[2].transactions[n].TxType == "contractform") {var objectInBox = "Allowance for Contract ID"}
                                                    else if (data[0].Type == "collateralPost" && data[2].transactions[n].TxType != "contractform") {var objectInBox = "Host address"}
                                                    else if (data[0].Type == "collateralPost" && data[2].transactions[n].TxType == "contractform") {var objectInBox = "Collateral for Contract ID"}
                                                    else if (data[0].Type == "storageproof") {var objectInBox = "Host address"}
                                                    else if (data[0].Type == "blockreward") {var objectInBox = "Miner payout address"}
                                                    else if (data[0].Type == "revision") {var objectInBox = "Address (same wallet)"}

                                                    // Color
                                                    if (data[0].Type == "SfTx" && data[2].transactions[n].SfChange > 0) {colorInBox = "purple"}

                                                    // Image
                                                    if (data[0].Type == "ScTx" || data[0].Type == "revision" || (data[0].Type == "SfTx" && data[2].transactions[n].TxType != "SfClaim")) {iconInBox = "assets/nav/address.png"}
                                                    else if (data[0].Type == "ScTx" || (data[0].Type == "SfTx" && data[2].transactions[n].TxType == "SfClaim")) {var iconInBox = "assets/nav/sfclaim.png"}
                                                    else if (data[0].Type == "host ann") {iconInBox = "assets/nav/host.png"}
                                                    else if (data[0].Type == "allowancePost" && data[2].transactions[n].TxType != "contractform") {iconInBox = "assets/nav/renter.png"}
                                                    else if (data[0].Type == "allowancePost" && data[2].transactions[n].TxType == "contractform") {iconInBox = "assets/nav/contract.png"}
                                                    else if (data[0].Type == "collateralPost" && data[2].transactions[n].TxType != "contractform") {iconInBox = "assets/nav/host.png"}
                                                    else if (data[0].Type == "collateralPost" && data[2].transactions[n].TxType == "contractform") {iconInBox = "assets/nav/contract.png"}
                                                    else if (data[0].Type == "storageproof") {iconInBox = "assets/nav/host.png"}
                                                    else if (data[0].Type == "blockreward") {iconInBox = "assets/nav/miner.png"}

                                                    // Pushing the Box to the Scheme
                                                    addRowReceiver(objectInBox, linkInBox, addressInBox, valueInBox, iconInBox, firstReceiverBool, colorInBox)

                                                    // Checking if this is the first receiver: if yes, change the boolean 
                                                    if (firstReceiverBool == true) {firstReceiverBool = false}
                                                }
                                            }
                                        }

                                        // Extra Boxes for certain transaction types
                                        if (data[0].Type == "host ann") {
                                            var objectInBox = "New host announced: IP"
                                            var colorInBox = "#403f3f"
                                            var iconInBox = "assets/nav/hostann.png"
                                            var linkInBox = ""
                                            var sizeInBox = 4
                                            addSimpleBox(objectInBox, data[1].IP, colorInBox, iconInBox, linkInBox, sizeInBox)
                                        
                                        } else if (data[0].Type == "storageproof") {
                                            var objectInBox = "Contract resolution"
                                            var colorInBox = "#403f3f"
                                            var iconInBox = "assets/nav/resolution.png"
                                            var resolutionId = shortHash(data[1].HashSynonyms.slice(0,63) + "R")
                                            var linkInBox = "navigator?search=" + (data[1].HashSynonyms.slice(0,63) + "R")
                                            var sizeInBox = 2
                                            addSimpleBox(objectInBox, resolutionId, colorInBox, iconInBox, linkInBox, sizeInBox)

                                        } else if (data[0].Type == "revision") {
                                            var objectInBox = "Revision of Contract ID"
                                            var colorInBox = "#403f3f"
                                            var iconInBox = "assets/nav/revision.png"
                                            var contractId = shortHash(data[1].ContractId)
                                            var linkInBox = "navigator?search=" + data[1].ContractId
                                            var sizeInBox = 2
                                            addSimpleBox(objectInBox, contractId, colorInBox, iconInBox, linkInBox, sizeInBox)
                                        
                                        } else if (data[0].Type == "contractresol") {
                                            if (data[1].Result == "fail") {
                                                var objectInBox = "Renter address: returned allowance"
                                                var objectInBox2 = "Host address: unused collateral"
                                            } else {
                                                var objectInBox = "Renter address: unused allowance"
                                                var objectInBox2 = "Host address: payout + collateral back"
                                            }
                                            var colorInBox = "#2ba84b"
                                            var iconInBox = "assets/nav/renter.png"
                                            var addressInBox = shortHash(data[1].Output0Address)
                                            var linkInBox = "navigator?search=" + data[1].Output0Address
                                            var valueInBox = readable(data[1].Output0Value) + " SC"
                                            var firstReceiverBool = true
                                            addRowReceiver(objectInBox, linkInBox, addressInBox, valueInBox, iconInBox, firstReceiverBool, colorInBox)
                                            var addressInBox2 = shortHash(data[1].Output1Address)
                                            var valueInBox2 = readable(data[1].Output1Value) + " SC"
                                            var linkInBox2 = "navigator?search=" + data[1].Output1Address
                                            var iconInBox2 = "assets/nav/host.png"
                                            var firstReceiverBool = false
                                            addRowReceiver(objectInBox2, linkInBox2, addressInBox2, valueInBox2, iconInBox2, firstReceiverBool, colorInBox)
                                            if (data[1].Result == "fail") {
                                                var objectInBox3 = "Burning address: lost collateral"
                                                var addressInBox3 = shortHash(data[1].Output2Address)
                                                var valueInBox3 = readable(data[1].Output2Value) + " SC"
                                                var linkInBox3 = "navigator?search=" + data[1].Output2Address
                                                var iconInBox3 = "assets/nav/burn.png"
                                                var colorInBox = "red"
                                                addRowReceiver(objectInBox3, linkInBox3, addressInBox3, valueInBox3, iconInBox3, firstReceiverBool, colorInBox)
                                            }
                                        } else if (data[0].Type == "contract") {
                                            var objectInBox = "Formed Contract ID"
                                            var addressInBox = shortHash(data[1].ContractId)
                                            var totalSc = data[1].ValidProof1Value + data[1].ValidProof2Value
                                            var valueInBox = readable(totalSc) + " SC"
                                            var linkInBox = "navigator?search=" + data[1].ContractId
                                            var iconInBox = "assets/nav/contract.png"
                                            var colorInBox = "#2ba84b"
                                            var firstReceiverBool = true
                                            addRowReceiver(objectInBox, linkInBox, addressInBox, valueInBox, iconInBox, firstReceiverBool, colorInBox)
                                        }
                                        
                                        // Miner fees. Not if it is a collateral post or an allowance post
                                        if (data[0].Type != "allowancePost" && data[0].Type != "collateralPost" && data[0].Type != "contractresol" && data[0].Type != "blockreward") {
                                            var readableFees = readable(data[1].Fees) + " SC"
                                            var objectInBox = "Miner fees"
                                            var colorInBox = "#2ba84b"
                                            var iconInBox = "assets/nav/miner.png"
                                            var linkInBox = ""
                                            var sizeInBox = 4
                                            addSimpleBox(objectInBox, readableFees, colorInBox, iconInBox, linkInBox, sizeInBox)
                                        }

                                        // Adjusting the width of the elements
                                        adjustWidth()
                                    }
    
                                    function addRowSender(object, link, address, value, icon, color) {
                                        // Adds a sender to the Scheme
                                        var div = document.createElement('div');

                                        div.className = 'row';

                                        div.innerHTML =
                                            '<table id="scheme" class="table-outer scheme-outer" style="margin: 0 auto; padding: 0 auto; width: 1150; text-align: left">'
                                                + '<tr>'
                                                    + '<td class="address-box" style="background:#e1e1e1; height: 120; width: 600; padding: 0">'
                                                        + '<table class="table-outer table-head-out" style="height: 80;">'
                                                            + '<th style="width: 30px; text-align: center">'
                                                                + '<IMG style="vertical-align:middle" SRC="' + icon + '" id="header_logo" ALT="hash type" WIDTH=30 HEIGHT=30>'
                                                            + '</th>'
                                                            + '<th>'
                                                                + '<table class="address-box-inner table-nav" style="width: 570; height: 80; background: #fff; border-top-right-radius:10px; border-bottom-right-radius:10px">'
                                                                    + '<th class="text-left" style="height: 20px; border-bottom-left-radius:0px; border-top-left-radius:0px; border-bottom-right-radius:0px">'
                                                                        + '<span style="vertical-align:bottom; margin: 0 0 0 0"><b>' + object +'</b></span>'
                                                                    + '</th>'
                                                                    + '<tr style="height: 30px; border-bottom-right-radius:10px;">'
                                                                        + '<td class="text-left" style="background: #ddd; border-radius: 0; font-size: 12.5">'
                                                                            + '<a href="' + link + '" style="display:block; color:#403f3f">'
                                                                                + address
                                                                            + '</a>'
                                                                        + '</td>'
                                                                    + '</tr>'
                                                                    + '<tr style="height: 30px">'
                                                                        + '<td class="text-right" style="text-align: right; padding: 0 30 0 0"><font size="4" color="' + color + '">' + value +'</font></td>'
                                                                    + '</tr>'
                                                                + '</table>'
                                                            + '</th>'
                                                        + '</table>'
                                                    + '</td>'
                                                    + '<td style="background:#e1e1e1; height: 100;">'
                                                    + '</td>'
                                                + '</tr>'
                                            + '</table>'

                                        document.getElementById('content').appendChild(div);
                                    }

                                    function addRowReceiver(object, link, address, value, icon, bool, color) {
                                        // Adds a receiver to the Scheme
                                        var div = document.createElement('div');

                                        div.className = 'row';

                                        // Adds the arrow only in the first receiver
                                        if (bool == true) {
                                            var arrow =   '<td id="arrow" width=45 style="background:#e1e1e1; padding: 0 0 0; vertical-align: top; padding: 0 0 0 40">'
                                                            + '<div class="rectangle"></div>'
                                                        + '</td>'
                                                        + '<td class="arrow2" style="background:#e1e1e1; padding: 0; min-width: 90">'
                                                            + '<IMG style="vertical-align:middle" SRC="assets/nav/arrow_body2.png" ALT="arrow" WIDTH=100% HEIGHT=120>'
                                                        + '</td>'
                                                        + '<td width=30 style="background:#e1e1e1; padding: 0">'
                                                            + '<div class="triangle-right" style="padding: 0 10 0 0;"></div>'
                                                        + '</td>'
                                        } else {
                                            var arrow = '<td class="arrow2" style="background:#e1e1e1; padding: 0; min-width: 150"></td>'
                                        }

                                        div.innerHTML =
                                            '<table id="scheme" class="table-outer scheme-outer" style="margin: 0 auto; padding: 0 auto; width: 1150;>'
                                                + '<tr>'
                                                    + '<td style="height: 120; padding: 0 0 20; background:#e1e1e1;">'
                                                        + arrow
                                                    + '</td>'
                                                    + '<td class="address-box" style="background:#e1e1e1; height: 120; width: 600; padding: 0">'
                                                        + '<table class="table-outer table-head-out" style="height: 80">'
                                                            + '<th style="width: 30px; text-align: center">'
                                                                + '<IMG style="vertical-align:middle" SRC="' + icon + '" id="header_logo" ALT="hash type" WIDTH=30 HEIGHT=30>'
                                                            + '</th>'
                                                            + '<th>'
                                                                + '<table class="address-box-inner table-nav" style="width: 570; height: 80; background: #fff; border-top-right-radius:10px; border-bottom-right-radius:10px">'
                                                                    + '<th class="text-left" style="height: 20px; border-bottom-left-radius:0px; border-top-left-radius:0px; border-bottom-right-radius:0px">'
                                                                        + '<span style="vertical-align:bottom; margin: 0 0 0 0"><b>' + object + '</b></span>'
                                                                    + '</th>'
                                                                    + '<tr style="height: 30px; border-bottom-right-radius:10px;">'
                                                                        + '<td class="text-left" style="background: #ddd; border-radius: 0; font-size: 12.5">'
                                                                            + '<a href="' + link + '" style="display:block; color:#403f3f">'
                                                                                + address
                                                                            + '</a>'
                                                                        + '</td>'
                                                                    + '</tr>'
                                                                    + '<tr style="height: 30px">'
                                                                        + '<td class="text-right" style="text-align: right; padding: 0 30 0 0"><font size="4" color=' + color + '>' + value + '</font></td>'
                                                                    + '</tr>'
                                                                + '</table>'
                                                            + '</th>'
                                                        + '</table>'
                                                    + '</td>'
                                                + '</tr>'
                                            + '</table>'

                                        document.getElementById('content').appendChild(div);
                                    }

                                    function addSimpleBox (object, value, color, icon, link, size) {
                                        // Adds a simple Box to the scheme (miner fees, host announced...)
                                        var div = document.createElement('div');

                                        if (link == "") {
                                            link2 = ""
                                        } else {
                                            link = '<a href="' + link + '" style="display:block; color:#403f3f">'
                                            link2 = "</a>"
                                        }
                                        if (value.length == 64) { value = shortHash(value)}

                                        div.className = 'row';

                                        div.innerHTML =
                                            '<table id="scheme" class="table-outer scheme-outer" style="margin: 0 auto; padding: 0 auto; width: 1150; text-align: left">'
                                                + '<tr>'
                                                    + '<td style="background:#e1e1e1; height: 90;">'
                                                        + '<td class="arrow2" style="background:#e1e1e1; padding: 0; min-width: 140"></td></td>'
                                                    + '<td class="address-box" style="background:#e1e1e1; height: 90; width: 600; padding: 0">'
                                                        + '<table class="table-outer table-head-out" style="height: 50">'
                                                            + '<th style="width: 30px; text-align: center">'
                                                                + '<IMG style="vertical-align:middle" SRC="'+ icon + '" id="header_logo" ALT="hash type" WIDTH=30 HEIGHT=30>'
                                                            + '</th>'
                                                            + '<th>'
                                                                + '<table class="address-box-inner table-nav" style="width: 570; height: 50; background: #fff; border-top-right-radius:10px; border-bottom-right-radius:10px">'
                                                                    + '<th class="text-left" style="height: 20px; border-bottom-left-radius:0px; border-top-left-radius:0px; border-bottom-right-radius:0px">'
                                                                        + '<span style="vertical-align:bottom; margin: 0 0 0 0"><b>' + object + '</b></span>'
                                                                    + '</th>'
                                                                    + '<tr style="height: 30px">'
                                                                        + '<td class="text-right" style="text-align: right; padding: 0 30 0 0">' + link
                                                                        + '<font size="' + size + '" color="' + color + '">' + value + '</font>' + link2 + '</td>'
                                                                    + '</tr>'
                                                                + '</table>'
                                                            + '</th>'
                                                        + '</table>'
                                                    + '</td>'
                                                + '</tr>'
                                            + '</table>'

                                        document.getElementById('content').appendChild(div);
                                    }

                                    function addSimpleSenderBox (object, value, color, icon, link, size) {
                                        // Adds a simple Box to the scheme (block reward)
                                        var div = document.createElement('div');

                                        if (link == "") {
                                            link2 = ""
                                        } else {
                                            link = '<a href="' + link + '" style="display:block; color:#403f3f">'
                                            link2 = "</a>"
                                        }
                                        if (value.length == 64) { value = shortHash(value)}

                                        div.className = 'row';

                                        div.innerHTML =
                                        '<table id="scheme" class="table-outer scheme-outer" style="margin: 0 auto; padding: 0 auto; width: 1150; text-align: left">'
                                            + '<tr>'
                                                
                                                + '<td class="address-box" style="background:#e1e1e1; height: 90; width: 600; padding: 0">'
                                                    + '<table class="table-outer table-head-out" style="height: 50">'
                                                        + '<th style="width: 30px; text-align: center">'
                                                            + '<IMG style="vertical-align:middle" SRC="'+ icon + '" id="header_logo" ALT="hash type" WIDTH=30 HEIGHT=30>'
                                                        + '</th>'
                                                        + '<th>'
                                                            + '<table class="address-box-inner table-nav" style="width: 570; height: 50; background: #fff; border-top-right-radius:10px; border-bottom-right-radius:10px">'
                                                                + '<th class="text-left" style="height: 20px; border-bottom-left-radius:0px; border-top-left-radius:0px; border-bottom-right-radius:0px">'
                                                                    + '<span style="vertical-align:bottom; margin: 0 0 0 0"><b>' + object + '</b></span>'
                                                                + '</th>'
                                                                + '<tr style="height: 30px">'
                                                                    + '<td class="text-right" style="text-align: right; padding: 0 30 0 0">' + link
                                                                    + '<font size="' + size + '" color="' + color + '">' + value + '</font>' + link2 + '</td>'
                                                                + '</tr>'
                                                            + '</table>'
                                                        + '</th>'
                                                    + '</table>'
                                                + '</td>'
                                                + '<td style="background:#e1e1e1; height: 90;"></td>'
                                            + '</tr>'
                                        + '</table>'

                                        document.getElementById('content').appendChild(div);
                                    }

                                    function renderTxTable(data, hashType) {
                                        var blockLink = "navigator?search=" + data[1].Height
                                        var confirmations = auxblock.consensusblock - data[1].Height + 1
                                        var color = ""
                                        if (confirmations < 10) {
                                            color = "#cfbe2c"
                                        } else if (confirmations >= 10 && confirmations < 72) {
                                            color = "#a3cf2c"
                                        } else {
                                            color = "#2ccf75"
                                            confirmations = "72+"
                                        }
                                        var timestamp = timeConverter(data[1].Timestamp)
                                        if (data[0].Type != "contractresol" && data[0].Type != "contract") { // In resolutions and contracts, there are no synonyms
                                            var synonyms = processSynonyms(data[1].HashSynonyms)
                                        }
                                        if (data[0].Type == "revision") {
                                            var synonyms = data[1].MasterHash + ", " + data[1].HashSynonyms
                                        } else if (data[0].Type == "contractresol") {
                                            var synonyms = processSynonyms(data[1].Synonyms)
                                        }

                                        // Totals transacted. Not if a contract
                                        if (data[0].Type == "contract") {
                                            transacted = readable(data[1].RenterValue + data[1].HostValue) + " SC"
                                        } else {
                                            var totalSc = 0
                                            var totalSf = 0
                                            for (var n = 0; n < data[2].transactions.length; n++) {
                                                    if (data[2].transactions[n].ScChange > 0) {
                                                        totalSc = totalSc + data[2].transactions[n].ScChange
                                                    } else if (data[2].transactions[n].SfChange > 0) {
                                                        totalSf = totalSf + data[2].transactions[n].SfChange
                                                    }
                                                }
                                            transacted = readable(totalSc + data[1].Fees) + " SC"
                                            
                                            // Add SF to the result, only when there were trasnacted
                                            if (totalSf != 0) {
                                                transacted = transacted + " / " + totalSf + " SF"
                                            }
                                        }

                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<table id="table-fill" class="table-outer" style="width: 1150px">' 
                                            + '<thead>'
                                                + '<tr style="background:#ffffff;">'
                                                    + '<th colspan="2" class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                        + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Transaction information:</font></strong></span>'
                                                    + '</th>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Transaction type:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size:medium">' + hashType + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Height:</font></span>'
                                                    + '</td>'
                                                    + '<td><a href="' + blockLink + '" style="display:block; color:#403f3f; text-decoration: none">'
                                                        + '<span style="vertical-align:center; font-size:medium">' + data[1].Height + '</span>'
                                                        + '<span style="vertical-align:center; font-size:medium; padding: 0 15; margin: 0 30; background: ' + color + '; border-radius: 10px; color: #fff; font-weight: 700">'
                                                            + confirmations + ' confirmations'
                                                        + '</span></a>'
                                                    + '</td>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Timestamp:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size:medium">' + timestamp + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Total transacted:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size:medium">' + transacted + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                        
                                        // Additions for certain TX types

                                        if (data[0].Type == "allowancePost" || data[0].Type == "collateralPost") {
                                            // In these cases, the Synonyms field is showing the Contract ID
                                            var contractLink = "navigator?search=" + data[1].HashSynonyms
                                            var tableCode = tableCode       
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Related Contract ID:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span  style="vertical-align:center; font-size: 11"><a href="' + contractLink + '" style="display:block; color:#403f3f">' 
                                                        + synonyms + '</span>'
                                                    + '</td>'
                                                + '</tr>'

                                        } else if (data[0].Type == "contractresol" || data[0].Type == "contract") {
                                            // In these cases, showing the Contract ID
                                            var contractLink = "navigator?search=" + data[1].ContractId
                                            if (data[1].Result == "fail" || data[1].Status == "complete-fail") {
                                                if (data[1].MissedProof3Value == "0" || data[1].Output2Value == "0") {
                                                    var colorResult = '#cfbe2c'
                                                    var textResult = "Unused"
                                                } else {
                                                    var colorResult = '#ff5555'
                                                    var textResult = "Failed"
                                                }
                                            } else if (data[1].Result == "success" || data[1].Status == "complete-succ") {
                                                var colorResult = '#2ccf75'
                                                var textResult = "Successful"
                                            } else if (data[1].Status == "ongoing") {
                                                var colorResult = '#a0a0a0'
                                                var textResult = "Ongoing"
                                            }

                                            var tableCode = tableCode       
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Related Contract ID:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span  style="vertical-align:center; font-size: 11"><a href="' + contractLink + '" style="display:block; color:#403f3f">' 
                                                        + data[1].ContractId + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Contract status:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; background: ' + colorResult + '; color: white; padding: 0 20; border-radius: 10px; font-weight: 700;"><font size="3">' 
                                                        + textResult + '</font></span>'
                                                    + '</td>'
                                                + '</tr>'
                                        }

                                        if (data[0].Type == "contract") {
                                                if (data[1].Renew == true) {
                                                    var renewWord = "Renewal"
                                                } else {
                                                    var renewWord = "New"
                                                }
                                                var tableCode = tableCode
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">New / Renewal:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + renewWord + '</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">File size at contract formation:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + (data[1].OriginalFileSize/1000000000).toFixed(2) + ' GB</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">File size at last revision:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + (data[1].CurrentFileSize/1000000000).toFixed(2) + ' GB</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">Last revision number:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + data[1].RevisionNum + '</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">Window for proof of storage:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + data[1].WindowStart + " - " + data[1].WindowEnd + '</span>'
                                                    + '</td></tr>'
                                        } else if (data[0].Type == "revision") {
                                                var tableCode = tableCode
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">New revision number:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + data[1].NewRevisionNum + '</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">New file size:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + (data[1].NewFileSize/1000000000).toFixed(2) + ' GB</span>'
                                                    + '</td></tr>'

                                        }

                                        if (data[0].Type == "contract") {
                                                // SiaFund fees
                                                var sfFees = (data[1].RenterValue + data[1].HostValue) * 0.039
                                                var feesPercentage = (sfFees / data[1].RenterValue * 100).toFixed(2)
                                                var feesCell = readable(sfFees) + " SC <font size=2>(" + feesPercentage + "% of the renter's allowance)</font>"
                                                //feesCell = feesPercentage
                                                var tableCode = tableCode
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">Fees paid to SF holders:</font></span>'
                                                        + '</td><td>'
                                                            + '<span style="vertical-align:center; font-size: medium">' + feesCell + '</span>'
                                                    + '</td></tr>'
                                        }

                                        if (data[0].Type == "contract" || data[0].Type == "revision") {
                                                var tableCode = tableCode
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">Conditions upon success:</font></span>'
                                                        + '</td><td style="padding: 10 15">'
                                                            + '<span style="vertical-align:center; font-size: medium">' 
                                                                + '<IMG style="vertical-align:middle" SRC="/assets/nav/mini_renter.png" id="renter" ALT="hash type" WIDTH=20 HEIGHT=20>' 
                                                                + " Returned allowance: " + readable(data[1].ValidProof1Value) + ' SC <br><br>'
                                                                + '<IMG style="vertical-align:middle" SRC="/assets/nav/mini_host.png" id="renter" ALT="hash type" WIDTH=20 HEIGHT=20>'
                                                                + " Payout + collateral: " + readable(data[1].ValidProof2Value) + ' SC</span>'
                                                    + '</td></tr>'
                                                    + '<tr><td>'
                                                            + '<span style="vertical-align:center"><font size="3">Conditions upon fail:</font></span>'
                                                        + '</td><td style="padding: 10 15">'
                                                            + '<span style="vertical-align:center; font-size: medium">' 
                                                                + '<IMG style="vertical-align:middle" SRC="/assets/nav/mini_renter.png" id="renter" ALT="hash type" WIDTH=20 HEIGHT=20>' 
                                                                + " Returned allowance: " + readable(data[1].MissedProof1Value) + ' SC <br><br>'
                                                                + '<IMG style="vertical-align:middle" SRC="/assets/nav/mini_host.png" id="renter" ALT="hash type" WIDTH=20 HEIGHT=20>'
                                                                + " Returned collateral: " + readable(data[1].MissedProof2Value) + ' SC <br><br>'
                                                                + '<IMG style="vertical-align:middle" SRC="/assets/nav/mini_burn.png" id="renter" ALT="hash type" WIDTH=20 HEIGHT=20>'
                                                                + " Burnt collateral: " + readable(data[1].MissedProof3Value) + ' SC </span>'
                                                    + '</td></tr>'
                                        
                                        } else if (data[0].Type == "storageproof") {
                                            // In these cases, the Synonyms field is showing the Contract ID
                                            var contractLink = "navigator?search=" + data[1].HashSynonyms
                                            var resolution = data[1].HashSynonyms.slice(0,63) + "R"
                                            var resolutionLink = "navigator?search=" + resolution
                                            var tableCode = tableCode       
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Related Contract ID:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size: 11"><a href="' + contractLink + '" style="display:block; color:#403f3f">' 
                                                        + synonyms + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Creates the Contract Resolution ID:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size: 11"><a href="' + resolutionLink + '" style="display:block; color:#403f3f">' 
                                                        + resolution + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                        
                                        } else  if (data[0].Type == "host ann") {
                                            tableCode = tableCode
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Announced host:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span id="data3" style="vertical-align:center; font-size: medium">' + data[1].IP + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                        }

                                        // Adding synonyms:
                                        if (data[0].Type != "blockreward" && data[0].Type != "storageproof" && data[0].Type != "allowancePost" && data[0].Type != "collateralPost" && data[0].Type != "contract") {
                                            var tableCode = tableCode       
                                                + '<tr>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center"><font size="3">Synonym hashes:</font></span>'
                                                    + '</td>'
                                                    + '<td>'
                                                        + '<span style="vertical-align:center; font-size: 11">' + synonyms + '</span>'
                                                    + '</td>'
                                                + '</tr>'
                                        }
                                        
                                        // This closes the table
                                        tableCode = tableCode + '</thead> </table>'
                                        div.innerHTML = tableCode
                                        document.getElementById('content2').appendChild(div);

                                        // Re-adjustements of the layout
                                        adjustWidth()
                                        document.getElementById("loader2").style.display = 'none';
                                    }


                                    function renderContractRelated(data) {
                                        
                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<table id="table-fill" class="table-outer" style="width: 1150px">' 
                                            + '<thead>'
                                                + '<tr style="background:#ffffff;">'
                                                    + '<th colspan="5" class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                        + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Contract related operations:</font></strong></span>'
                                                    + '</th>'

                                        if (data[2].Height >= 0) { // Only if there is a Revision
                                            tableCode = tableCode
                                                + '</tr>'
                                                + '<tr style="height: 50px">'
                                                    + '<td style="border-right: 0px">'
                                                        + '<IMG style="vertical-align:middle" SRC="/assets/nav/revision_b.png" id="renter" ALT="hash type" WIDTH=30 HEIGHT=30></td>'
                                                    + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:medium"><a href="navigator?search=' + data[2].MasterHash + '" style="display:block; color:#403f3f"> Contract revision </a></td>'
                                                    + '</td>'
                                                    + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + data[2].MasterHash + '" style="display:block; color:#403f3f">'
                                                    + shortHash(data[2].MasterHash) + '</a></td>'
                                                    + '<td style="border-right: 0px"><a href="navigator?search=' + data[2].Height + '" style="display:block; color:#403f3f">'
                                                        + '<span style="vertical-align:center; font-size:small">Block: ' + data[2].Height + '</span></a>'
                                                    + '</td>'
                                                    + '<td style="font-size:small; border-right: 0px">' + timeConverter(data[2].Timestamp) + '</td>'
                                                + '</tr>'
                                        }
                                        if (data[4].Height >= 0) { // Only if there is an Storage Proof
                                            tableCode = tableCode
                                                + '<tr style="height: 50px">'
                                                    + '<td style="border-right: 0px">'
                                                        + '<IMG style="vertical-align:middle" SRC="/assets/nav/storageproof_b.png" id="renter" ALT="hash type" WIDTH=30 HEIGHT=30></td>'
                                                    + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:medium"><a href="navigator?search=' + data[4].TxHash + '" style="display:block; color:#403f3f"> Storage proof </a></td>'
                                                    + '</td>'
                                                    + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + data[4].TxHash + '" style="display:block; color:#403f3f">'
                                                    + shortHash(data[4].TxHash) + '</a></td>'
                                                    + '<td style="border-right: 0px"><a href="navigator?search=' + data[4].Height + '" style="display:block; color:#403f3f">'
                                                        + '<span style="vertical-align:center; font-size:small">Block: ' + data[4].Height + '</span></a>'
                                                    + '</td>'
                                                    + '<td style="font-size:small; border-right: 0px">' + timeConverter(data[4].Timestamp) + '</td>'
                                                + '</tr>'
                                        }
                                        if (data[3].Height >= 0) { // Only if there is a Resolution
                                            tableCode = tableCode
                                                + '<tr style="height: 50px">'
                                                    + '<td style="border-right: 0px">'
                                                        + '<IMG style="vertical-align:middle" SRC="/assets/nav/resolution_b.png" id="renter" ALT="hash type" WIDTH=30 HEIGHT=30></td>'
                                                    + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:medium"><a href="navigator?search=' + data[3].MasterHash + '" style="display:block; color:#403f3f"> Contract resolution </a></td>'
                                                    + '</td>'
                                                    + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + data[3].MasterHash + '" style="display:block; color:#403f3f">'
                                                    + shortHash(data[3].MasterHash) + '</a></td>'
                                                    + '<td style="border-right: 0px"><a href="navigator?search=' + data[3].Height + '" style="display:block; color:#403f3f">'
                                                        + '<span style="vertical-align:center; font-size:small">Block: ' + data[3].Height + '</span></a>'
                                                    + '</td>'
                                                    + '<td style="font-size:small; border-right: 0px">' + timeConverter(data[3].Timestamp) + '</td>'
                                                + '</tr>'
                                        }
                                        
                                        // This closes the table
                                        tableCode = tableCode + '</thead> </table>'
                                        div.innerHTML = tableCode
                                        document.getElementById('content2').appendChild(div);    
                                    }

                                    function renderContractTimeline(data) {
                                        // Shows a timeline representation of the contract

                                        // A table header
                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        div.innerHTML =
                                            '<table id="table-fill" class="table-outer" style="width: 1150px; height: 25px; margin: 0 auto">' 
                                                + '<thead>'
                                                    + '<tr style="background:#ffffff;">'
                                                        + '<th class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                            + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">File Contract timeline:</font></strong></span>'
                                                        + '</th>'
                                                    + '</tr>'
                                                + '</thead>'
                                            + '</table>'
                                            + '<div id="timeline" class="table-outer" style="height: 200px; margin: 0 auto; padding: 0 auto; width: 1150px" ></div>'
                                        document.getElementById('content4').appendChild(div);
                                        
                                        // Google charts timeline
                                        google.charts.load('current', {'packages':['timeline']});
                                        google.charts.setOnLoadCallback(drawChart);
                                        function drawChart() {

                                            // Preparing the dates for the chart
                                            var timestamp = parseInt(data[1].Timestamp)
                                            var contractStart = new Date(timestamp * 1000)
                                            var contractEndPre = timestamp + ((data[1].WindowStart - data[1].Height) * 600)
                                            var contractEnd = new Date(contractEndPre * 1000)
                                            var windowStart = new Date((contractEndPre + 1) * 1000)
                                            var windowEndPre = timestamp + ((data[1].WindowEnd - data[1].Height) * 600)
                                            var windowEnd = new Date(windowEndPre * 1000)
                                            var revisionStartPre = timestamp + ((data[2].Height - data[1].Height) * 600) - 10000
                                            var revisionStart = new Date(revisionStartPre * 1000)
                                            var revisionEndPre = timestamp + ((data[2].Height - data[1].Height) * 600) + 10000
                                            var revisionEnd = new Date(revisionEndPre * 1000)
                                            if (data[3].Result == "success") { // Only show successful proofs
                                                var proofStartPre = timestamp + ((data[3].Height - data[1].Height) * 600) - 10000
                                                var proofStart = new Date(proofStartPre * 1000)
                                                var proofEndPre = timestamp + ((data[3].Height - data[1].Height) * 600) + 10000
                                                var proofEnd = new Date(proofEndPre * 1000)
                                            } else {
                                                var proofStart = new Date("")
                                                var proofEnd = new Date("")
                                            }

                                            var container = document.getElementById('timeline');
                                            document.getElementById('content4').appendChild(div);
                                            var chart = new google.visualization.Timeline(container);
                                            var dataTable = new google.visualization.DataTable();

                                            dataTable.addColumn({ type: 'string', id: 'President' });
                                            dataTable.addColumn({ type: 'string', id: 'Name' });
                                            dataTable.addColumn({ type: 'date', id: 'Start' });
                                            dataTable.addColumn({ type: 'date', id: 'End' });
                                            dataTable.addRows([
                                                [ 'Contract span', "Contract: " + data[1].ContractId, contractStart, contractEnd],
                                                [ 'Contract span', "Proof Window", windowStart, windowEnd],
                                                [ 'Revision', "Revision: " + data[2].MasterHash, revisionStart, revisionEnd],
                                                [ 'Storage proof', "Storage proof: " + data[3].MasterHash, proofStart, proofEnd]
                                            ]);

                                            var options = {
                                                timeline: { showBarLabels: false, 
                                                    // rowLabelStyle: { fontSize: 11 }, barLabelStyle: { fontSize: 6 }  // Reduces the height of the rows
                                                },
                                                colors: ['#505050', 'orange', 'red', "#1aa759"],

                                            };

                                            chart.draw(dataTable, options);
                                        }
                                    }


                                    function renderError(search) {
                                        // Renders the error message
                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<div\ style="margin: 50 auto; width: 500; color: #9eb4a9; text-align: left">'
                                                + '<span style="font-size: 80">:-( <br></span>'
                                                + '<span style="font-size: 40">Hash not found<br></span>'
                                                + '<span style="font-size: 20">If the transaction was recently broadcasted, it will not show up until it is included in a block<br></span>'
                                                + '<span style="font-size: 20">Search also in the official Sia Explorer'
                                                    + '<a href="https://explore.sia.tech/hashes/' + search + '">'
                                                        + '<IMG style="vertical-align:middle; padding: 0 0 0 10" SRC="assets/nav/link2.png" ALT="section label" WIDTH=25 HEIGHT=21>'
                                                    + '</a></span>'
                                            + '</div>'
                                        div.innerHTML = tableCode
                                        document.getElementById('content').appendChild(div);
                                    }


                                    function renderQrAndBalance(data, address) {
                                        // Finding the first block the address was seen
                                        var txs = data[1].last100Transactions
                                        txs.sort(function(a, b) {
                                            return parseFloat(b.Height) - parseFloat(a.Height);
                                        });

                                        // Renders the balance table and a QR code of the address
                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<div class="home-outer" style="height:225px;">'
                                            + '<div class="home-inner table-address" style="padding: 0 25 0 25; width: 700; height:225px;">'
                                                + '<div class="home-element">'
                                                    + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                        + '<thead>'
                                                            + '<tr style="height: 25px; background:#ffffff;">'
                                                                + '<th colspan="2" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Address summary:</font></strong></span>'
                                                                + '</th>'
                                                            + '</tr>'
                                                            + '<tr>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Siacoin balance: </td>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center; text-align: right">' + readable(data[1].balanceSc) + ' SC</td>'
                                                            + '</tr>'
                                                            + '<tr>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Siafund balance: </td>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center; text-align: right">' + data[1].balanceSf + ' SF</td>'
                                                            + '</tr>'
                                                            + '<tr>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> Number of transactions: </td>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:120%; vertical-align:center; text-align: right">' + data[1].TotalTxCount + '</td>'
                                                            + '</tr>'
                                                            + '<tr>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center;"> First seen (block): </td>'
                                                                + '<td style="height: 50px; padding: 0 15 0 15; font-size:110%; vertical-align:center; text-align: right">' + data[1].firstSeen + '</td>'
                                                            + '</tr>'
                                                        + '</thead>'
                                                    + '</table>'
                                                + '</div>'
                                            + '</div>'
                                            + '<div class="home-inner qr-code" style="height:225px; padding: 0 0 75 25; width: 400">'
                                                + '<div id="card" style="height:225px; text-align: center; background-color: #ffffff; border-radius: 5px">'
                                                    + '<IMG style="margin: 12 100 auto;" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + address + '"></IMG>'
                                                + '</div>'
                                            + '</div>'
                                        + '</div>'

                                        
                                        div.innerHTML = tableCode
                                        document.getElementById('content').appendChild(div);
                                    }


                                    function renderTxInBlock(data) {
                                        // This function splits the list of transactions in 3 categories and calls a function to draw 3 tables
                                        var scTxs = []
                                        var contracts = []
                                        var others = []
                                        for (n = 0; n < data[2].transactions.length; n++) {
                                            if (data[2].transactions[n].TxType == "ScTx") {
                                                scTxs.push(data[2].transactions[n])
                                            } else if (data[2].transactions[n].TxType == "SfTx" || data[2].transactions[n].TxType == "blockreward" || data[2].transactions[n].TxType == "host ann") {
                                                others.push(data[2].transactions[n])
                                            } else {
                                                contracts.push(data[2].transactions[n])
                                            }
                                        }
                                        // Sorting arrays
                                        others.sort(function(a,b) {return (a.TxType > b.TxType) ? 1 : ((b.TxType > a.TxType) ? -1 : 0);} );
                                        contracts.sort(function(a,b) {return (a.TxType > b.TxType) ? 1 : ((b.TxType > a.TxType) ? -1 : 0);} );

                                        var text = "Siacoin transactions"
                                        drawBlockTxTable(scTxs, text)
                                        var text2 = "File contracts activity"
                                        drawBlockTxTable(contracts, text2)
                                        var text3 = "Other transactions"
                                        drawBlockTxTable(others, text3)

                                        // Re-adjustements of the layout
                                        document.getElementById("loader2").style.display = 'none';
                                        adjustWidth()
                                    }

                                    function drawBlockTxTable(txs, text) {
                                        // Draws a table with transactions of an specific kind
                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<table id="table-fill" class="table-outer" style="width: 1150px">' 
                                            + '<thead>'
                                                + '<tr style="background:#ffffff;">'
                                                    + '<th colspan="6" class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                        + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">' + text + ':</font></strong></span>'
                                                    + '</th>'
                                                + '</tr>'
                                        
                                        // Iterates on each transaction
                                        for (var n = 0; n < txs.length; n++) {
                                            // Tx type label and icon
                                            if (txs[n].TxType == "ScTx") {
                                                var type = "Siacoin transfer"
                                                var icon = "/assets/nav/sctx_b.png"
                                            } else if (txs[n].TxType == "SfTx") {
                                                var type = "Siafund transfer"
                                                var icon = "/assets/nav/sftx_b.png"
                                            } else if (txs[n].TxType == "blockreward") {
                                                var type = "Block reward"
                                                var icon = "/assets/nav/miner_b.png"
                                            } else if (txs[n].TxType == "storageproof") {
                                                var type = "Storage proof"
                                                var icon = "/assets/nav/storageproof_b.png"
                                            } else if (txs[n].TxType == "allowancePost") {
                                                var type = "Allowance posting"
                                                var icon = "/assets/nav/allowance_b.png"
                                            } else if (txs[n].TxType == "collateralPost") {
                                                var type = "Collateral posting"
                                                var icon = "/assets/nav/collateral_b.png"
                                            } else if (txs[n].TxType == "contractresol") {
                                                var type = "Contract resolution"
                                                var icon = "/assets/nav/resolution_b.png"
                                            } else if (txs[n].TxType == "revision") {
                                                var type = "Contract revision"
                                                var icon = "/assets/nav/revision_b.png"
                                            } else if (txs[n].TxType == "contract") {
                                                var type = "Contract formation"
                                                var icon = "/assets/nav/contract_b.png"
                                            } else if (txs[n].TxType == "host ann") {
                                                var type = "Host announcement"
                                                var icon = "/assets/nav/hostann_b.png"
                                            } else if (txs[n].TxType == "contractform") {
                                                var type = "Contract formation"
                                                var icon = "/assets/nav/contract_b.png"
                                            }

                                            if (txs[n].TxType == "SfTx") {
                                                var value = txs[n].TotalAmountSf + " SF / " + readable(txs[n].TotalAmountSc) + " SC"
                                            } else {
                                                var value = readable(txs[n].TotalAmountSc) + " SC"
                                            }


                                            tableCode = tableCode
                                                + '<tr style="height: 35px">'
                                                    + '<td style="border-right: 0px">'
                                                        + '<IMG style="vertical-align:middle" SRC="' + icon + '" ALT="hash type" WIDTH=25 HEIGHT=25></td>'
                                                    + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:small"><a href="navigator?search=' + txs[n].TxHash + '" style="display:block; color:#403f3f">' + type + '</a></td>'
                                                    + '</td>'
                                                    + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + txs[n].TxHash + '" style="display:block; color:#403f3f">'
                                                        + shortHash(txs[n].TxHash) + '</a></td>'
                                                    + '<td style="border-right: 0px; min-width: 115px; padding: 0 10 0 0; font-size:small; font-weight: bold; text-align: right">'
                                                        + value
                                                    + '</td>'
                                                + '</tr>'
                                        }
                                        
                                        // This closes the table
                                        tableCode = tableCode + '</thead> </table>'
                                        div.innerHTML = tableCode
                                        document.getElementById('content3').appendChild(div); 
                                    }


                                    function renderBlockMetadata(data) {

                                        renderBlockHTML(data)

                                    }

                                    function renderBlockHTML(data) {

                                        // Adjusting some fields:
                                        var readableDifficulty = ""
                                        if (data[1].Difficulty >= 1000000000000 && data[1].Difficulty < 1000000000000000) {readableDifficulty = ((data[1].Difficulty/1000000000000).toFixed(2)) + " TH"}
                                        else if (data[1].Difficulty >= 1000000000000000 && data[1].Difficulty < 1000000000000000000) {readableDifficulty = ((data[1].Difficulty/1000000000000000).toFixed(2)) + " PH"}
                                        else if (data[1].Difficulty >= 1000000000000000000 && data[1].Difficulty < 1000000000000000000000) {readableDifficulty = ((data[1].Difficulty/1000000000000000000).toFixed(2)) + " EH"}
                                        var difficulty = readableDifficulty + ' <span style="font-size: 70%; padding: 0 0 0 10">' + data[1].Difficulty + " H</span>"

                                        var readableHashrate = ""
                                        if (data[1].Hashrate >= 1000000000 && data[1].Hashrate < 1000000000000) {readableHashrate = ((data[1].Hashrate/1000000000).toFixed(2)) + " GH/s"}
                                        else if (data[1].Hashrate >= 1000000000000 && data[1].Hashrate < 1000000000000000) {readableHashrate = ((data[1].Hashrate/1000000000000).toFixed(2)) + " TH/s"}
                                        else if (data[1].Hashrate >= 1000000000000000 && data[1].Hashrate < 1000000000000000000) {readableHashrate = ((data[1].Hashrate/1000000000000000).toFixed(2)) + " PH/s"}
                                        var hashrate = readableHashrate + ' <span style="font-size: 70%; padding: 0 0 0 10">' + data[1].Hashrate + " H/s</span>"

                                        var readableContractsize = ""
                                        if (data[1].TotalContractSize >= 1099511627776 && data[1].TotalContractSize < 1125899906842624) {readableContractsize = ((data[1].TotalContractSize/1099511627776).toFixed(2)) + " TB"}
                                        if (data[1].TotalContractSize >= 1125899906842624 && data[1].TotalContractSize < 1152921504606846976) {readableContractsize = ((data[1].TotalContractSize/1125899906842624).toFixed(2)) + " PB"}
                                        if (data[1].TotalContractSize >= 1152921504606846976 && bdata[1].TotalContractSize < 1180591620717411303424) {readableContractsize = ((data[1].TotalContractSize/1152921504606846976).toFixed(2)) + " EB"}
                                        var contractSize = readableContractsize + ' <span style="font-size: 70%; padding: 0 0 0 10">' + data[1].TotalContractSize + " bytes</span>"

                                        readableContractcost = ""
                                        if (data[1].TotalContractCost >= 1000000000000000000000000000000 && data[1].TotalContractCost < 1000000000000000000000000000000000) {readableContractcost = (data[1].TotalContractCost/1000000000000000000000000000000).toFixed(2) + " millions SC"}
                                        if (data[1].TotalContractCost >= 1000000000000000000000000000000000 && data[1].TotalContractCost < 1000000000000000000000000000000000000) {readableContractcost = (data[1].TotalContractCost/1000000000000000000000000000000000).toFixed(2) + " billions SC"}
                                        var contractCost = readableContractcost + ' <span style="font-size: 70%; padding: 0 0 0 10">' + parseInt(data[1].TotalContractCost / 1000000000000000000000000) + " SC</span>"

                                        var readableActivecontractsize = ""
                                        if (data[1].ActiveContractSize >= 1073741824 && data[1].ActiveContractSize < 1099511627776) {readableActivecontractsize = ((data[1].ActiveContractSize/1073741824).toFixed(2)) + " GB"}
                                        if (data[1].ActiveContractSize >= 1099511627776 && data[1].ActiveContractSize < 1125899906842624) {readableActivecontractsize = ((data[1].ActiveContractSize/1099511627776).toFixed(2)) + " TB"}
                                        if (data[1].ActiveContractSize >= 1125899906842624 && data[1].ActiveContractSize < 1152921504606846976) {readableActivecontractsize = ((data[1].ActiveContractSize/1125899906842624).toFixed(2)) + " PB"}
                                        if (data[1].ActiveContractSize >= 1152921504606846976 && data[1].ActiveContractSize < 1180591620717411303424) {readableActivecontractsize = ((data[1].ActiveContractSize/1152921504606846976).toFixed(2)) + " EB"}
                                        var activeContractSize = readableActivecontractsize + ' <span style="font-size: 70%; padding: 0 0 0 10">' + data[1].ActiveContractSize + " bytes</span>"

                                        var readableActivecontractcost = ""
                                        if (data[1].ActiveContractCost >= 1000000000000000000000000000000 && data[1].ActiveContractCost < 1000000000000000000000000000000000) {readableActivecontractcost = (data[1].ActiveContractCost/1000000000000000000000000000000).toFixed(2) + " millions SC"}
                                        if (data[1].ActiveContractCost >= 1000000000000000000000000000000000 && data[1].ActiveContractCost < 1000000000000000000000000000000000000) {readableActivecontractcost = (data[1].ActiveContractCost/1000000000000000000000000000000000).toFixed(2) + " billions SC"}
                                        var activeContractCost = readableActivecontractcost + ' <span style="font-size: 70%; padding: 0 0 0 10">' + parseInt(data[1].ActiveContractCost / 1000000000000000000000000) + " SC</span>"

                                        var totalCoins = (data[1].TotalCoins/1000000000000000000000000000000000).toFixed(2) + ' billions of SC <span style="font-size: 70%; padding: 0 0 0 10">' + parseInt(data[1].TotalCoins/1000000000000000000000000) + " SC</span>"

                                        var div = document.createElement('div');
                                        div.className = 'row';
                                        var tableCode = '<div class="home-outer" style="height:340px">'
                                                
                                                + '<div class="home-inner" style="padding: 0 0 75 25">'
                                                    + '<div class="home-element">'
                                                        + '<table id="table-fill" class="table-outer" style="margin: 0">'
                                                            + '<thead>'
                                                                + '<tr style="height: 25px; background:#ffffff;">'
                                                                    + '<th colspan="2" class="text-left" style="height: 25px; background:#8d8d8d; padding: 0 10 0 10; border-right: 0px solid #D1D1D1">'
                                                                        + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Block metadata:</font></strong></span></th>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Height:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].Height + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Block hash:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small; font-size:50%">' 
                                                                        + '<a href="navigator?search=' + data[1].Hash + '" style="display:block;  color:#403f3f">' 
                                                                        + data[1].Hash + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Timestamp (local):</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + timeConverter(data[1].Timestamp) + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Timestamp (Unix):</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].Timestamp + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Miner payout address:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small; font-size:50%">' 
                                                                        + '<a href="navigator?search=' + data[1].MinerPayoutAddress + '" style="display:block;  color:#403f3f">' 
                                                                        + data[1].MinerPayoutAddress + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Miner arbitrary data:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size: 60%">' + data[1].MinerArbitraryData.slice(0,50) + '...</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Difficulty:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + difficulty + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Hashrate:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + hashrate + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Coins in circulation:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + totalCoins + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic TX count:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].TransactionCount + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic contracts count:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].TotalContractCount + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic contracts size:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + contractSize + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic contracts cost:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + contractCost + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic revisions:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].FileContractRevisionCount + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Historic storage proofs:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].StorageProofCount + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Active contract count:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].ActiveContractCount + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Active contract size (est.):</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + activeContractSize + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Active contract cost:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + activeContractCost + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Contracts in block:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].NewContracts + '</td>'
                                                                + '</tr>'
                                                                + '<tr>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">Transactions in block:</td>'
                                                                    + '<td style="height: 30px; padding: 0 15; font-size:small">' + data[1].NewTx + '</td>'
                                                                + '</tr>'
                                                            + '</thead>'
                                                        + '</table>'
                                                    + '</div>'
                                                + '</div>'
                                            + '</div>'

                                        div.innerHTML = tableCode
                                        document.getElementById('content2').appendChild(div);

                                        // Re-adjustements of the layout
                                        document.getElementById("loader2").style.display = 'none';
                                        adjustWidth()
                                    }
                                })

                                function renderAddressList(txs, auxblock, container) {
                                    // Shows the list of changes in balance for a particular address
                                    var div = document.createElement('div');
                                    div.className = 'row';
                                    var tableCode = '<table id="table-fill" class="table-outer" style="width: 1150px">' 
                                        + '<thead>'
                                            + '<tr style="background:#ffffff;">'
                                                + '<th colspan="6" class="text-left" style=" background:#8d8d8d; border-right: 0px solid #D1D1D1">'
                                                    + '<span style="vertical-align:center; margin: 0 0 0 5"><strong><font size="3" color="white">Last 100 transactions:</font></strong></span>'
                                                + '</th>'
                                            + '</tr>'
                                    
                                    // Iterates on each transaction
                                    for (var n = 0; n < txs.length; n++) {
                                        // Tx type label and icon
                                        if (txs[n].TxType == "ScTx") {
                                            var type = "Siacoin transfer"
                                            var icon = "/assets/nav/sctx_b.png"
                                        } else if (txs[n].TxType == "SfTx") {
                                            var type = "Siafund transfer"
                                            var icon = "/assets/nav/sftx_b.png"
                                        } else if (txs[n].TxType == "SfClaim") {
                                            var type = "SF dividend claim"
                                            var icon = "/assets/nav/sfclaim_b.png"
                                        } else if (txs[n].TxType == "blockreward") {
                                            var type = "Block reward"
                                            var icon = "/assets/nav/miner_b.png"
                                        } else if (txs[n].TxType == "storageproof") {
                                            var type = "Storage proof"
                                            var icon = "/assets/nav/storageproof_b.png"
                                        } else if (txs[n].TxType == "allowancePost") {
                                            var type = "Allowance posting"
                                            var icon = "/assets/nav/allowance_b.png"
                                        } else if (txs[n].TxType == "collateralPost") {
                                            var type = "Collateral posting"
                                            var icon = "/assets/nav/collateral_b.png"
                                        } else if (txs[n].TxType == "contractresol") {
                                            var type = "Contract resolution"
                                            var icon = "/assets/nav/resolution_b.png"
                                        } else if (txs[n].TxType == "revision") {
                                            var type = "Contract revision"
                                            var icon = "/assets/nav/revision_b.png"
                                        } else if (txs[n].TxType == "contract") {
                                            var type = "Contract formation"
                                            var icon = "/assets/nav/contract_b.png"
                                        } else if (txs[n].TxType == "host ann") {
                                            var type = "Host announcement"
                                            var icon = "/assets/nav/hostann_b.png"
                                        } else if (txs[n].TxType == "contractform") {
                                            var type = "Contract formation"
                                            var icon = "/assets/nav/contract_b.png"
                                        }

                                        if (txs[n].SfChange != 0) {
                                            var value = txs[n].SfChange + " SF"
                                            if (txs[n].SfChange > 0) {var color = "purple"}
                                            else {var color = "orange"}
                                        } else {
                                            var value = readable(txs[n].ScChange) + " SC"
                                            if (txs[n].ScChange > 0) {
                                                var color = "#2ba84b"
                                            } else {
                                                var color = "red"
                                            }
                                        }

                                        // Confirations
                                        var confirmations = auxblock.consensusblock - txs[n].Height + 1
                                        var colorConfirmation = ""
                                        if (confirmations < 10) {
                                            colorConfirmation = "#cfbe2c"
                                        } else if (confirmations >= 10 && confirmations < 72) {
                                            colorConfirmation = "#a3cf2c"
                                        } else {
                                            colorConfirmation = "#2ccf75"
                                            confirmations = "72+"
                                        }

                                        tableCode = tableCode
                                        + '<tr style="height: 40px">'
                                                + '<td style="border-right: 0px">'
                                                    + '<IMG style="vertical-align:middle" SRC="' + icon + '" ALT="hash type" WIDTH=25 HEIGHT=25></td>'
                                                + '<td style="padding: 0 0 0 10; border-right: 0px; font-size:small"><a href="navigator?search=' + txs[n].MasterHash + '" style="display:block; color:#403f3f">' + type + '</a></td>'
                                                + '</td>'
                                                + '<td style="font-size:x-small; border-right: 0px"><a href="navigator?search=' + txs[n].MasterHash + '" style="display:block; color:#403f3f">'
                                                    + superShortHash(txs[n].MasterHash) + '</a></td>'
                                        
                                        // Date only added in wide and medium screens
                                        if ($(window).width() >= 800) {
                                            tableCode = tableCode
                                                + '<td style="font-size:small; border-right: 0px"><a href="navigator?search=' + txs[n].MasterHash + '" style="display:block;  color:#403f3f">'
                                                    + timeConverter(txs[n].Timestamp) + '</a></td>'
                                        }

                                        tableCode = tableCode
                                                + '<td style="border-right: 0px; min-width: 150px"><a href="navigator?search=' + txs[n].MasterHash + '" style="display:block; text-decoration:none; color:#403f3f">'
                                                    + '<span style="vertical-align:center; font-size:small; padding: 0 15; margin: 0 0; background: ' + colorConfirmation + '; border-radius: 10px; color: #fff; font-weight: 700;">'
                                                        + confirmations + ' confirmations'
                                                    + '</span></a>'
                                                + '</td>'
                                                + '<td style="border-right: 0px; min-width: 115px; padding: 0 10 0 0; font-size:small; color: ' + color + '; font-weight: bold; text-align: right">'
                                                        + value
                                                + '</td>'
                                            + '</tr>'
                                    }
                                    
                                    // This closes the table
                                    tableCode = tableCode + '</thead> </table>'
                                    div.innerHTML = tableCode
                                    document.getElementById(container).appendChild(div);
                                    document.getElementById(container).style.display = 'block'

                                    // Re-adjustements of the layout
                                    document.getElementById("loader2").style.display = 'none';
                                    adjustWidth()
                                    
                                }

                                function readable(number) {
                                    // Transforms numbers into readable: significant decimal digits, 3-digit separators
                                    number = number / 1000000000000000000000000
                                    var original = number
                                    if (number < 0) {
                                        number = Math.abs(number)
                                        var sign = "-" // To add at the end
                                    } else {
                                        var sign = ""
                                    }
                                    integer = Math.floor(number)
                                    decimal = number - integer
                                    numTxt = integer.toString()

                                    var segments = []
                                    while (numTxt.length > 3) {
                                        var s = numTxt.slice(-3)
                                        segments.push(s)
                                        numTxt = numTxt.slice(0,(numTxt.length-3))
                                    }
                                    segments.push(numTxt)
                                    var readableNumber = ""
                                    for (var n = (segments.length - 1); n >= 0; n--) {
                                        readableNumber = readableNumber + segments[n]
                                        if (n > 0) {readableNumber = readableNumber + " "}
                                    }
                                    // The decimals
                                    if (Math.abs(original) < 1) {
                                        decimal = decimal.toFixed(4)
                                        decimal = decimal.slice(2)
                                    }
                                    else {
                                        decimal = decimal.toFixed(2) * 100
                                        decimal = decimal.toFixed(0)
                                    }
                                    readableNumber = sign + readableNumber + "." + decimal
                                    return readableNumber
                                }

                                function shortHash(hash) {
                                    if ($(window).width() < 800) {
                                        hash = hash.slice(0, 40) + "..."
                                    }
                                    return hash
                                }

                                function superShortHash(hash) {
                                    if ($(window).width() < 1200) {
                                        hash = hash.slice(0, 15) + "..."
                                    }
                                    return hash
                                }

                                function processSynonyms(synonyms) {
                                    // Separates the 2 hashes with a blank space after the ","
                                    var string1 = synonyms.slice(0,64)
                                    var string2 = synonyms.slice(65)
                                    // If the sliced string is long, slice it again, as there are 3 hashes in total
                                    if (string2.length > 100) {
                                        string3 = string2.slice(65)
                                        string2 = string2.slice(0,64)
                                        var concat = string1 + ", " + string2 + ", " + string3
                                    } else {
                                        var concat = string1 + ", " + string2
                                    }
                                    return concat
                                }

                                function timeConverter(UNIX_timestamp){
                                    var a = new Date(UNIX_timestamp * 1000);
                                    var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                                    var year = a.getFullYear();
                                    var month = months[a.getMonth()];
                                    var date = a.getDate();
                                    var hour = a.getHours();
                                    if (hour < 10) {hour = "0" + hour}
                                    var min = a.getMinutes();
                                    if (min < 10) {min = "0" + min}
                                    var sec = a.getSeconds();
                                    if (sec < 10) {sec = "0" + sec}
                                    var time = date + ' ' + month + ' ' + year + ' - ' + hour + ':' + min + ':' + sec ;
                                    return time;
                                }
                        </script>

                        <script>
                            function adjustWidth() {
                                // Script for adjusting the main page to the screen width. Screens with <1200 will use 1 column
                                var w = $(window).width();

                                // Adjusting the card sizes to the screen size. More than 850: wider columns
                                if (w < 1200 && w >= 800) { // Wide 1 column
                                    $('.home-inner').css('width', 750);
                                    $('.home-inner2').css('width', 750);
                                    $('.home-outer').css('width', 800);
                                    $('.footer').css('max-width', 800);
                                    $('.sub-header').css('width', 750);
                                    $('.result').css('width', 750);
                                    $('.table-outer').css('max-width', 750);
                                    $('.arrow2').css('min-width', 50)
                                    $('.inner-header').css('max-width', 690);
                                    $('.search-box-outer').css('width', 750);
                                    $('.tab').css('width', 750)
                                    $('.search-box').css('max-width', 650);
                                    $('.textbox').css('max-width', 650);;
                                } else if (w < 850) { // 1 column
                                    $('.home-outer').css('width', 550);
                                    $('.sub-header').css('width', 550);
                                    $('.result').css('width', 550);
                                    $('.footer').css('max-width', 550);
                                    $('.table-outer').css('max-width', 550)
                                    $('.address-box').css('max-width', 400)
                                    $('.address-box-inner').css('max-width', 350)
                                    $('.inner-header').css('max-width', 500);
                                    $('.qr-code').css('width', 550);
                                    $('.table-address').css('width', 550);
                                    $('.search-box-outer').css('width', 550);
                                    $('.tab').css('width', 550);
                                    $('.search-box').css('max-width', 450);
                                    $('.textbox').css('max-width', 450);
                                }

                                if (w < 1200) {
                                    $('.home-inner2').css('height', 360);
                                    // Simplifying the
                                    document.getElementById("arrow").style.display = 'none'
                                    //document.getElementById("arrow2").style.width = 'none'
                                    
                                }
                            }

                            adjustWidth()
                            
                        </script>  


            </div></div></div>
            
            <div class="footer-outer"> 
                <div class="footer">

                </div>
            </div>
    </body>
    
 </html>
